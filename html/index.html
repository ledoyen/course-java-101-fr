<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="LoÃ¯c Ledoyen">
<title>Java 101</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Java 101</h1>
<div class="details">
<span id="author" class="author">LoÃ¯c Ledoyen</span><br>
<span id="email" class="email"><a href="mailto:loic.ledoyen@gmail.com">loic.ledoyen@gmail.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_objectifs_du_langage">Objectifs du Langage</a></li>
<li><a href="#_adoption">Adoption</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_premiÃ¨re_partie">1. Le langage Java, premiÃ¨re partie</a>
<ul class="sectlevel2">
<li><a href="#_point_dentrÃ©e_dun_programme_java">1.1. Point dâentrÃ©e dâun programme Java</a></li>
<li><a href="#_les_types">1.2. Les types</a></li>
<li><a href="#_les_variables">1.3. Les variables</a></li>
<li><a href="#_opÃ©rateurs">1.4. OpÃ©rateurs</a></li>
<li><a href="#_nommage">1.5. Nommage</a></li>
<li><a href="#_annotations">1.6. Annotations</a></li>
<li><a href="#_les_objets">1.7. Les Objets</a></li>
<li><a href="#_concevoir_un_objet">1.8. Concevoir un objet</a></li>
<li><a href="#_comparer_des_objets">1.9. Comparer des objets</a></li>
<li><a href="#_enum">1.10. Enum</a></li>
<li><a href="#_record">1.11. Record</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_deuxiÃ¨me_partie">2. Le langage Java, deuxiÃ¨me partie</a>
<ul class="sectlevel2">
<li><a href="#_formes_conditionnelles">2.1. Formes conditionnelles</a></li>
<li><a href="#_boucles">2.2. Boucles</a></li>
<li><a href="#_exceptions">2.3. Exceptions</a></li>
<li><a href="#_interfaces">2.4. Interfaces</a></li>
<li><a href="#_classes_abstraites">2.5. Classes abstraites</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_troisiÃ¨me_partie">3. Le langage Java, troisiÃ¨me partie</a>
<ul class="sectlevel2">
<li><a href="#_gÃ©nÃ©ricitÃ©">3.1. GÃ©nÃ©ricitÃ©</a></li>
<li><a href="#_collections">3.2. Collections</a></li>
<li><a href="#_streams">3.3. Streams</a></li>
<li><a href="#_expressions_lambda">3.4. Expressions Lambda</a></li>
</ul>
</li>
<li><a href="#_le_langage_java_quatriÃ¨me_partie">4. Le langage Java, quatriÃ¨me partie</a>
<ul class="sectlevel2">
<li><a href="#_thread">4.1. Thread</a></li>
</ul>
</li>
<li><a href="#_solid">5. SOLID</a>
<ul class="sectlevel2">
<li><a href="#_exemple_pour_s_et_l">5.1. Exemple pour <strong>S</strong> et <strong>L</strong></a></li>
<li><a href="#_exemple_pour_o_et_d">5.2. Exemple pour <strong>O</strong> et <strong>D</strong></a></li>
<li><a href="#_exemple_pour_i">5.3. Exemple pour <strong>I</strong></a></li>
</ul>
</li>
<li><a href="#_Ã©cosystÃ¨me_java">6. ÃcosystÃ¨me Java</a>
<ul class="sectlevel2">
<li><a href="#_maven">6.1. Maven</a></li>
<li><a href="#_junit">6.2. JUnit</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a>
<ul class="sectlevel2">
<li><a href="#_pour_aller_plus_loin">Pour aller plus loin</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java est un langage sorti en 1998 et dÃ©veloppÃ© par Sun Microsystems.</p>
</div>
<div class="paragraph">
<p>On fait la distinction entre la JVM (Java Virtual Machine) qui permet lâexÃ©cution dâun programme Java et le JDK (Java Development Kit), qui comprend la JVM, ainsi que les outils de dÃ©veloppement permettant de crÃ©er un programme Java, notamment le compilateur.</p>
</div>
<div class="paragraph">
<p>En 2006, le compilateur et la machine virtuelle (JVM pour Java Virtual Machine) sont open-sourcÃ©s sous licence GNU.<br>
En 2009, Oracle acquiers Sun Microsystems et Java devient un produit Oracle.<br>
Lâutilisation des binaires du JDK (Java Development Kit) produits par Oracle sont alors soumis Ã  une license complexe pour les usages professionnels.</p>
</div>
<div class="paragraph">
<p>Il existe cependant dâautres distributions (la diffÃ©rence pour les entreprises Ã©tant le niveau de support possible) :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eclipse Adoptium (anciennement AdoptOpenJDK)</p>
</li>
<li>
<p>Azul Zulu Builds of OpenJDK</p>
</li>
<li>
<p>Red Hat build of OpenJDK</p>
</li>
<li>
<p>Amazon Corretto</p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_objectifs_du_langage">Objectifs du Langage</h3>
<div class="paragraph">
<p>Initialement, le langage Java est crÃ©Ã© pour palier aux dÃ©fauts de C++, et notamment la gestion manuelle de la mÃ©moire, tout en gardant le cÃ´tÃ© <strong><em>orientÃ© objet</em></strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ã cette fin le ramasse-miettes (Garbage Collector ou GC) est crÃ©Ã©.<br>
Il sâagit dâun programme indÃ©pendant sâexÃ©cutant dans la JVM et dont le rÃ´le est de scruter les objets qui ne sont plus rÃ©fÃ©rencÃ©s afin de libÃ©rer la mÃ©moire correspondante.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les crÃ©ateurs du langage souhaitaient Ã©galement que les programmes Ã©crits en Java soient indÃ©pendants de la plateforme dâexÃ©cution (que ce soit Linux, Mac ou Windows).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Pour cela, un programme Java est dâabord compilÃ©, ce qui produit du <em>byte code</em>.<br>
Ce <em>byte code</em> est ensuite interprÃ©tÃ© par la JVM qui <span class="underline">elle</span> dÃ©pend de la plateforme.</p>
</div>
<div class="paragraph">
<p>Un programme Java nâa donc pas besoin du bit dâexÃ©cution pour pouvoir Ãªtre lancÃ© sous Linux, car la JVM va lire (interprÃ©ter) les binaires prÃ©cÃ©demment compilÃ©s.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Par la suite, sâajoutent Ã  ces objectifs initiaux</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une forte rÃ©tro-compatibilitÃ©, ce qui permettra une large adoption du langage</p>
</li>
<li>
<p>une efficacitÃ© Ã  lâexÃ©cution grÃ¢ce au compilateur JIT (Just In Time) qui optimise le <em>byte code</em> en analysant son utilisation.<br>
Cette technique est associÃ©e Ã  un temps de chauffe, temps nÃ©cessaire au JIT pour "observer" lâutilisation qui est faite du <em>byte code</em>.</p>
</li>
<li>
<p>le support dans la bibliothÃ¨que standard dâun certain nombre de connecteurs (TCP, UDP, HTTP, etc.), de structures de donnÃ©es (<code>List</code>, <code>Set</code>, <code>Map</code>, etc.) et dâalgorithmes (b-search, etc.)</p>
</li>
<li>
<p>une Ã©volution constante permettant de sâadapter aux paradigmes modernes, comme la programmation fonctionnelle ou rÃ©active</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Globalement, Java se veut un langage de haut niveau, facile dâaccÃ¨s et performant (ce point peut Ãªtre dÃ©battu, car la JVM utilise une mÃ©moire non nÃ©gligeable).</p>
</div>
</div>
<div class="sect2">
<h3 id="_adoption">Adoption</h3>
<div class="paragraph">
<p>Java compte aujourdâhui parmi les languages les plus populaires en entreprise, pour les raisons prÃ©cÃ©dentes, mais Ã©galement grÃ¢ce Ã  un Ã©cosystÃ¨me riche.</p>
</div>
<div class="paragraph">
<p>Dans cet Ã©cosystÃ¨me on trouve notamment :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven et Gradle (et dâautres systÃ¨mes de construction moins rÃ©pandus) qui permettent de gÃ©rer <em>simplement</em> un projet et ses dÃ©pendances</p>
</li>
<li>
<p>dâautres languages qui compilent vers du <em>byte code</em> (Groovy, Scala, Kotlin, etc.)</p>
</li>
<li>
<p>une communautÃ© sans cesse croissante de programmeurs venant enrichir une grande collection de bibliothÃ¨ques.</p>
</li>
<li>
<p>des IDE de trÃ¨s bonne qualitÃ© (IntelliJ, Eclipse, etc.)</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_premiÃ¨re_partie">1. Le langage Java, premiÃ¨re partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_point_dentrÃ©e_dun_programme_java">1.1. Point dâentrÃ©e dâun programme Java</h3>
<div class="paragraph">
<p>Un programme java a un unique point dâentrÃ©e qui sera utilisÃ© pour le lancer.</p>
</div>
<div class="paragraph">
<p>Ce point dâentrÃ©e, la fonction <code>main</code> est une mÃ©thode publique, statique, sans type de retour et prenant en paramÃ¨tre un tableau de chaÃ®ne de caractÃ¨res :</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">:</span> <span class="s">"World"</span><span class="o">));</span> // <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe contenant la fonction <code>main</code> doit Ãªtre publique</p>
</li>
<li>
<p>la <em>signature</em> de la mÃ©thode doit Ãªtre exacte, si elle nâest pas statique ou publique ou que les paramÃ¨tres ne sont pas un unique tableau de chaÃ®ne de caractÃ¨res, la fonction ne sera pas reconnue</p>
</li>
<li>
<p>du code <em>procÃ©dural</em> peut Ãªtre Ã©crit Ã  lâintÃ©rieur de cette mÃ©thode, en Java, les instructions doivent se terminer par un point-virgule <code>;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le paramÃ¨tre de la fonction <code>main</code> correspond aux arguments passÃ©s au programme.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">javac Launcher.java # <b class="conum">(1)</b>
jar <span class="nt">-cf</span> helloWorld.jar Launcher.class # <b class="conum">(2)</b>
java <span class="nt">-jar</span> helloWorld.jar Launcher Lernejo <span class="c"># Will display âHello Lernejoâ </span># <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>compilation, cela va produire le fichier Launcher.class contenant du <em>byte code</em></p>
</li>
<li>
<p>crÃ©ation dâune archive Java contenant lâunique classe compilÃ©e</p>
</li>
<li>
<p>execution du programme, Java va chercher une fonction <code>main</code> dans la classe <code>Launcher</code> qui lui est indiquÃ©e comme point dâentrÃ©e, le tableau <code>args</code> aura une unique entrÃ©e, le seul paramÃ¨tre qui est passÃ© au programme : <code>"Lernejo"</code></p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_les_types">1.2. Les types</h3>
<div class="paragraph">
<p>En Java il existe deux formes de type, les types <strong><em>primitifs</em></strong> et les types objets.</p>
</div>
<div class="paragraph">
<p>Les premiers commencent par une minuscule et reprÃ©sentent directement la donnÃ©e en mÃ©moire :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nom</th>
<th class="tableblock halign-left valign-top">Nombre de bits</th>
<th class="tableblock halign-left valign-top">Valeurs possibles</th>
<th class="tableblock halign-left valign-top">Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 (un <code>int</code> avec 0 ou 1 comme valeur)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true ou false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou nÃ©gatif</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou nÃ©gatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou nÃ©gatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1452</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entier positif ou nÃ©gatif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">164478945</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE 754</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124.54</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE 754</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124587451.1254878</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'h'</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les seconds sont des objets et leurs noms commencent par une majuscule.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Câest pourquoi il est important, quand on crÃ©e un nouveau type (classe, interface, enum ou record) que son nom commence par une <strong><span class="underline">Majuscule</span></strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_les_variables">1.3. Les variables</h3>
<div class="paragraph">
<p>Au sein dâune mÃ©thode, il est souvent nÃ©cessaire de stocker un rÃ©sultat intermÃ©diaire dans une variable.</p>
</div>
<div class="paragraph">
<p>En Java, une variable est en fait un rÃ©fÃ©rant, un "pointeur" vers une adresse mÃ©moire.</p>
</div>
<div class="paragraph">
<p>Ainsi en Ã©crivant <code>var b = a;</code>, on dÃ©clare un second rÃ©fÃ©rant <code>b</code> qui pointe vers la mÃªme adresse mÃ©moire que <code>a</code>.</p>
</div>
<div class="paragraph">
<p>En Java, il est possible de dÃ©clarer une variable de plusieurs faÃ§ons.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>String a;</code> : la variable nâest pas assignÃ©e, elle ne pointe vers rien, il est nÃ©cessaire de lui assigner une valeur afin de pouvoir lâutiliser par la suite.<br>
Par exemple : <code>a = "my-name";</code></p>
</li>
<li>
<p><code>int a = 43;</code> : la variable est dÃ©clarÃ©e et assignÃ©e, elle peut Ãªtre utilisÃ©e, sa valeur peut Ã©galement Ãªtre changÃ©e.<br>
Par exemple : <code>a++;</code></p>
</li>
<li>
<p><code>final MyType a;</code> : la variable nâest pas assignÃ©e, mais grÃ¢ce au mot-clÃ© <code>final</code>, le compilateur va garantir quâelle ne le sera quâune unique fois.<br>
Par exemple :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Listing 2. Fichier NameGenerator.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameGenerator</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">generateName</span><span class="o">(</span><span class="nc">FacialHairStyle</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">Gender</span><span class="o">.</span><span class="na">BEARDED</span> <span class="o">==</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Barbarossa"</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="nc">Gender</span><span class="o">.</span><span class="na">MUSTACHE</span> <span class="o">==</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Jenkins"</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Saitama"</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Enfin, il est Ã©galement possible dâutiliser le mot-clÃ© <code>var</code> si le type de la variable peut Ãªtre <em>infÃ©rÃ©</em> au moment de sa dÃ©claration.<br>
Cet usage est Ã  recommander aux endroits oÃ¹ la longueur dâun type diminue la lisibilitÃ©.<br>
Par exemple :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Listing 3. Fichier OccurrenceUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OccurrenceUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">mostOccurring</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strings</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">freqMap</span> <span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">,</span> <span class="nc">Collectors</span><span class="o">.</span><span class="na">counting</span><span class="o">()));</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;&gt;</span> <span class="n">maxEntryOpt</span> <span class="o">=</span> <span class="n">freqMap</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">.</span><span class="na">comparingByValue</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">maxEntryOpt</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">::</span><span class="n">getKey</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Peut Ãªtre simplifiÃ© :</p>
</div>
<div class="listingblock">
<div class="title">Listing 4. Fichier OccurrenceUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OccurrenceUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">mostOccurring</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strings</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">var</span> <span class="n">freqMap</span> <span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">,</span> <span class="nc">Collectors</span><span class="o">.</span><span class="na">counting</span><span class="o">()));</span>
        <span class="kt">var</span> <span class="n">maxEntryOpt</span> <span class="o">=</span> <span class="n">freqMap</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">.</span><span class="na">comparingByValue</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">maxEntryOpt</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">::</span><span class="n">getKey</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_opÃ©rateurs">1.4. OpÃ©rateurs</h3>
<div class="paragraph">
<p>Il existe plusieurs opÃ©rateurs en Java.</p>
</div>
<div class="paragraph">
<p>OpÃ©rateurs de calculs :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpÃ©rateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additionne deux nombres ou concatÃ¨ne deux chaÃ®nes de caractÃ¨res</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 + a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soustrait deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 - a</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplie deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b * 4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divise deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a / 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulo (reste de la division entiÃ¨re)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a % 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les opÃ©rateurs dâassignations stockent le rÃ©sultat du calcul dans lâopÃ©rande de gauche :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpÃ©rateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additionne deux nombres ou concatÃ¨ne deux chaÃ®nes de caractÃ¨res</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a += "toto"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soustrait deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a -= 3.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divise deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b /= 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplie deux nombres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a *= 2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les opÃ©rateurs dâassignations peuvent Ãªtre Ã©crits avec les opÃ©rateurs de calculs.<br>
Par exemple <code>b /= 2;</code> est Ã©quivalent Ã  <code>b = b / 2;</code>.</p>
</div>
<div class="paragraph">
<p>Les opÃ©rateurs dâincrÃ©mentation peuvent Ãªtre placÃ©s Ã  gauche ou Ã  droite dâune variable de faÃ§on Ã  ce que lâopÃ©ration soit rÃ©alisÃ©e avant ou aprÃ¨s lâexploitation du rÃ©sultat.</p>
</div>
<div class="paragraph">
<p>Par exemple, dans <code>array[++i] = 0 ;</code>, câest la valeur de <code>i</code> <em><span class="underline">aprÃ¨s</span></em> lâincrÃ©mentation qui est utilisÃ©e comme index du tableau.<br>
A contrario, dans <code>array[i--] = 0 ;</code>, câest la valeur de <code>i</code> <em><span class="underline">avant</span></em> la dÃ©crÃ©mentation qui est utilisÃ©e comme index du tableau.</p>
</div>
<div class="paragraph">
<p>Les opÃ©rateurs de comparaison, renvoient vrai si&#8230;&#8203;</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpÃ©rateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">==</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; les deux valeurs ont la mÃªme adresse mÃ©moire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a == 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; les deux valeurs nâont pas la mÃªme adresse mÃ©moire</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a != 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus petit (strictement) que celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &lt; 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus petit ou Ã©gal Ã  celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &#8656; 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus grand (strictement) que celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &gt; 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; le nombre de gauche est plus grand ou Ã©gal Ã  celui de droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &gt;= 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Certains opÃ©rateurs logiques peuvent sâappliquer sur les entiers, auxquels cas ils fonctionnent bit Ã  bit.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpÃ©rateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cible</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &amp;&amp; b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">||</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a || b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean et entiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a &amp; b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">|</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean et entiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a | b</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XOR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean et entiers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a ^ b</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les opÃ©rateurs de dÃ©calage de bit :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpÃ©rateur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Propagation du signe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exemple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DÃ©cale les bits vers la gauche (multiplie par 2 Ã  chaque dÃ©calage).<br>
Les bits qui sortent Ã  gauche sont perdus, et des zÃ©ros sont insÃ©rÃ©s Ã  droite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 &lt;&lt; 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DÃ©cale les bits vers la droite (divise par 2 Ã  chaque dÃ©calage).<br>
Les bits qui sortent Ã  droite sont perdus, et le bit non-nul de poids plus fort est recopiÃ© Ã  gauche</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 &gt;&gt; 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;&gt;&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DÃ©cale les bits vers la droite (divise par 2 Ã  chaque dÃ©calage).<br>
Les bits qui sortent Ã  droite sont perdus, et des zÃ©ros sont insÃ©rÃ©s Ã  gauche</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 &gt;&gt;&gt; 2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>LâopÃ©rateur <code>instanceof</code> renvoit vrai si le type de lâobjet testÃ©, est Ã©gal Ã , ou Ã©gal Ã  un sous-type de, lâopÃ©rande de droite.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="k">instanceof</span> <span class="nc">ArrayList</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(1)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>lâexecution entrera dans le bloc si lâobjet pointÃ© par la variable <code>a</code> est de type <code>ArrayList</code> ou dâun sous-type dâ <code>ArrayList</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_nommage">1.5. Nommage</h3>
<div class="paragraph">
<p>Le nommage a un intÃ©rÃªt prÃ©pondÃ©rant dans le paradigme objet oÃ¹ le dÃ©veloppeur essaie dâexprimer des concepts rÃ©els.<br>
Les classes, les champs, les mÃ©thodes, les variables, tous doivent avoir un nom clair et reprÃ©sentatif du rÃ´le que joue le composant.<br>
Les noms peuvent Ãªtre relativement longs sans que ce soit un problÃ¨me.<br>
La convention en Java est le <code>camelCase</code> de maniÃ¨re gÃ©nÃ©rale, lâ <code>UpperCamelCase</code> pour les types (nom de classe, dâinterface, dâenum ou de record).<br>
On peut Ã©galement trouver/utiliser le <code>lower_snake_case</code> pour les noms des mÃ©thodes de test.</p>
</div>
</div>
<div class="sect2">
<h3 id="_annotations">1.6. Annotations</h3>
<div class="paragraph">
<p>Les annotations sont des <em>marqueurs</em> quâil est possible de placer Ã  diffÃ©rents endroits afin</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de marquer un morceau de code visuellement sans que cela ait un impact sur le comportement du code</p>
</li>
<li>
<p>dÃ©clencher un comportement Ã  la compilation / construction</p>
</li>
<li>
<p>dÃ©clencher un comportement en <em>runtime</em> (durant lâexÃ©cution)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Java fournit entre autre lâannotation <code>@Override</code> qui permet de dÃ©clarer une mÃ©thode comme Ã©tant une surcharge dâune mÃ©thode parente.<br>
Si jamais il nâexiste pas (ou plus) une telle mÃ©thode parente, cela provoquera une erreur de compilation.</p>
</div>
<div class="listingblock">
<div class="title">Listing 5. Fichier Watchable.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Watchable</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 6. Fichier Movie.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Movie</span> <span class="kd">implements</span> <span class="nc">Watchable</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Movie</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> // <b class="conum">(2)</b>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe <code>Movie</code> dÃ©clare quâelle <em>implÃ©mente</em> lâinterface <code>Watchable</code></p>
</li>
<li>
<p>lâannotation ici dÃ©clare la mÃ©thode <code>name</code> comme Ã©tant la surcharge dâune dÃ©finition dans la hiÃ©rarchie de la classe.<br>
Supprimer la mÃ©thode de lâinterface, ou enlever la rÃ©fÃ©rence Ã  lâinterface provoquera une erreur de compilation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ce mÃ©canisme est utile lorsquâon implÃ©mente ou surcharge une mÃ©thode dÃ©finie dans la bibliothÃ¨que standard ou dans une bibliothÃ¨que tierce.<br>
Faire une mise Ã  jour de la bibliothÃ¨que en question peut changer les dÃ©finitions connues, et dans ce cas la compilation permet dâidentifier quâil y a quelque-chose Ã  adapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_les_objets">1.7. Les Objets</h3>
<div class="paragraph">
<p>Un objet est constituÃ© de donnÃ©es (son Ã©tat) <strong><span class="underline">et</span></strong> de comportements.</p>
</div>
<div class="paragraph">
<p>LâÃ©tat est reprÃ©sentÃ© par des champs, et le comportement par des mÃ©thodes.</p>
</div>
<div class="paragraph">
<p>Un objet est une instance de classe.</p>
</div>
<div class="sect3">
<h4 id="_anatomie_dune_classe">1.7.1. Anatomie dâune classe</h4>
<div class="listingblock">
<div class="title">Listing 7. Fichier Cat.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">com.lernejo.animals</span><span class="o">;</span> // <b class="conum">(1)</b>

<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span> // <b class="conum">(2)</b>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span> // <b class="conum">(3)</b>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">sleeping</span><span class="o">;</span> // <b class="conum">(4)</b>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">tryToWakeUp</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(5)</b>
        <span class="k">if</span> <span class="o">(!</span><span class="n">sleeping</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"The cat is already awake"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">sleeping</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">nextBoolean</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">sleeping</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>package</p>
</li>
<li>
<p>imports</p>
</li>
<li>
<p>dÃ©finition de la classe <code>Cat</code>, son contenu commence aprÃ¨s lâaccolade ouvrante et se termine avant la derniÃ¨re accolade fermante</p>
</li>
<li>
<p>champs</p>
</li>
<li>
<p>mÃ©thodes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le package (Ã©quivalent du namespace en C++ ou C#) dans lequel se trouve la classe est une faÃ§on dâorganiser son code afin :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de ne pas avoir des milliers de fichiers dans le mÃªme rÃ©pertoire</p>
</li>
<li>
<p>de faire cohabiter des objets de mÃªme nom dans des contextes diffÃ©rents, par exemple</p>
<div class="ulist">
<ul>
<li>
<p><code>org.junit.jupiter.api.Assertions</code> classe utilitaire fournie par la bibliothÃ¨que JUnit</p>
</li>
<li>
<p><code>org.assertj.core.api.Assertions</code> classe utilitaire fournie par la bibliothÃ¨que AssertJ</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>La concatÃ©nation du package et du nom de la classe est appelÃ© chemin qualifiÃ©.</p>
</div>
<div class="paragraph">
<p>Une classe doit Ãªtre dans une hiÃ©rarchie de rÃ©pertoires correspondante au package dÃ©clarÃ© en entÃªte.<br>
C&#8217;est-Ã -dire que la classe ci-dessus doit Ãªtre compilÃ©e comme ceci : <code>javac com/lernejo/animals/Cat.java</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les imports, permettent dâutiliser des types qui ne sont pas dans le mÃªme package ou dans le package <code>java.lang</code>.<br>
AccompagnÃ© du mot clÃ© <code>static</code> (<code>import static &#8230;&#8203;</code>), un import permet dâutiliser une mÃ©thode statique sans avoir Ã  la prÃ©fixer par la classe la contenant.</p>
</div>
<div class="paragraph">
<p>Les champs contiennent lâÃ©tat de lâobjet.<br>
Ils sont la plupart du temps <code>private</code> afin de pas Ãªtre accessibles Ã  lâextÃ©rieur de la classe qui les dÃ©clare.</p>
</div>
<div class="paragraph">
<p>Ils peuvent Ãªtre Ã©galement <code>final</code> si leur Ã©tat ne doit pas changer aprÃ¨s la construction de lâobjet.<br>
Un objet dont tous les champs sont <code>final</code> est dit <em>immutable</em>.</p>
</div>
<div class="paragraph">
<p>Les mÃ©thodes dâun objet reprÃ©sentent son comportement.<br>
Leur visibilitÃ© peut Ãªtre changÃ©e, afin de structurer le code.<br>
Une mÃ©thode a un unique type de retour, qui peut Ãªtre <code>void</code> dans le cas oÃ¹ la mÃ©thode ne retourne pas de donnÃ©e Ã  la suite de son exÃ©cution.<br>
Une mÃ©thode peut Ã©galement prendre zÃ©ro, un ou plusieurs paramÃ¨tres.<br>
Le nombre de lignes dâune mÃ©thode doit Ãªtre raisonnable afin que sa comprÃ©hension puisse se faire rapidement.</p>
</div>
</div>
<div class="sect3">
<h4 id="_constructeurs">1.7.2. Constructeurs</h4>
<div class="listingblock">
<div class="title">Listing 8. Fichier Cat.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> // <b class="conum">(1)</b>

    <span class="kd">public</span> <span class="nf">Cat</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span> // <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Ici le champ est <code>public</code>, mais <code>final</code>, donc il nâest pas modifiable une fois lâobjet crÃ©Ã©</p>
</li>
<li>
<p>un constructeur prenant un paramÃ¨tre de type String</p>
</li>
<li>
<p>Assignation de la valeur du paramÃ¨tre <code>name</code> au champs <code>name</code> de la classe <code>Cat</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un constructeur est une mÃ©thode particuliÃ¨re qui nâa pas de type de retour et dont le nom doit scrupuleusement Ãªtre le mÃªme que celui de la classe dans laquelle il est dÃ©clarÃ©.</p>
</div>
<div class="paragraph">
<p>Le constructeur est, comme son nom lâindique appelÃ© Ã  la construction de lâobjet.</p>
</div>
<div class="paragraph">
<p>Pour construire un objet on utilise le mot clÃ© <code>new</code>.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 9. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Cat</span> <span class="n">myCat</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cat</span><span class="o">(</span><span class="s">"Georges"</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myCat</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une classe peut avoir autant de constructeurs quâon le souhaite.</p>
</div>
<div class="paragraph">
<p>Une classe qui ne dÃ©clare aucun constructeur explicitement possÃ¨de un <em>constructeur par dÃ©faut</em>.<br>
Le constructeur par dÃ©faut ne prend aucun paramÃ¨tre et ne fait rien.<br>
Ã partir du moment oÃ¹ un constructeur est dÃ©clarÃ© explicitement, le constructeur par dÃ©faut nâest plus disponible.</p>
</div>
</div>
<div class="sect3">
<h4 id="_visibilitÃ©">1.7.3. VisibilitÃ©</h4>
<div class="paragraph">
<p>La visibilitÃ© est un mÃ©canisme qui permet Ã  une classe, un champ, ou une mÃ©thode dâÃªtre accessible ou non Ã  dâautres entitÃ©s.</p>
</div>
<div class="paragraph">
<p>Il existe 4 visibilitÃ©s en Java</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>public</code> : accessible Ã  tous</p>
</li>
<li>
<p><code>private</code> : accessible uniquement au sein de la classe qui dÃ©clare le composant</p>
</li>
<li>
<p><code>protected</code> : accessible aux classes qui Ã©tendent la classe qui contient le composant ou aux classes qui se trouvent dans le mÃªme <code>package</code>.</p>
</li>
<li>
<p>la visibilitÃ© par dÃ©faut, dite aussi <strong><em>package protected</em></strong>, quand aucun modificateur de visibilitÃ© nâest prÃ©cisÃ©.<br>
Le composant est question est alors accessible aux classes se trouvant dans le mÃªme package.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quand on conÃ§oit un programme orientÃ© objet, on va regrouper dans un mÃªme package les objets du mÃªme domaine, et leurs interactions spÃ©cifiques Ã  ce domaine seront <strong><em>package protected</em></strong>.<br>
Les comportements intrinsÃ¨ques aux objets de ce domaine seront <code>private</code>, alors que lâAPI (Application Programming Interface) accessible au reste du programme sera <code>public</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concevoir_un_objet">1.8. Concevoir un objet</h3>
<div class="paragraph">
<p>Un objet doit (dans la majoritÃ© des cas) Ãªtre construit de telle sorte quâil nâexpose pas <em>Ã  lâextÃ©rieur</em> la faÃ§on dont il reprÃ©sente son Ã©tat.</p>
</div>
<div class="paragraph">
<p>Tout lâenjeu de la programmation orientÃ©e objet est de rÃ©duire le couplage entre les concepts pour simplifier la maintenance, lâÃ©volution et la testabilitÃ© du code.</p>
</div>
<div class="paragraph">
<p>Un mauvais exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 10. Fichier TrafficLight.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">TrafficLight</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">color</span><span class="o">;</span> // <b class="conum">(1)</b>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setColor</span><span class="o">(</span><span class="kt">int</span> <span class="n">newColor</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">newColor</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getColor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>donnÃ©e privÃ©e, propre Ã  lâobjet</p>
</li>
<li>
<p>mÃ©thode publique permettant de changer la "couleur" du feu</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ici la classe reprÃ©sentant le feu tricolore expose la faÃ§on dont elle stocke ses donnÃ©es, et elle ne contient aucune logique.<br>
Un tel objet est dit <em>anÃ©mique</em>, car il nâa aucun comportement propre et est considÃ©rÃ© dans la majoritÃ© des cas comme une mauvaise pratique (code smell).<br>
Un autre objet qui utilise cette classe devra lui aussi changer si le type du champ <code>color</code> (&lt;1&gt;) change.</p>
</div>
<div class="paragraph">
<p>Un meilleur design pourrait Ãªtre :</p>
</div>
<div class="listingblock">
<div class="title">Listing 11. Fichier TrafficLight.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">class</span> <span class="nc">TrafficLight</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">color</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">Color</span> <span class="nf">nextState</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">color</span> <span class="o">=</span> <span class="o">(</span><span class="n">color</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">%</span> <span class="mi">3</span><span class="o">;</span>
        <span class="k">return</span> <span class="nc">Color</span><span class="o">.</span><span class="na">values</span><span class="o">()[</span><span class="n">color</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Color</span> <span class="o">{</span>
        <span class="no">GREEN</span><span class="o">,</span>
        <span class="no">ORANGE</span><span class="o">,</span>
        <span class="no">RED</span><span class="o">,</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ainsi le "contrat", câest-Ã -dire la partie publique de la classe, ne dÃ©pend pas de la faÃ§on dont lâÃ©tat est stockÃ© en mÃ©moire, ici avec un <code>int</code>.<br>
Par ailleurs, la logique du feu est codÃ©e dans lâobjet, rendant impossible les cas qui lâÃ©taient avec lâimplÃ©mentation prÃ©cÃ©dente :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>trafficLight.setColor(4)</code>, mais que veut dire la valeur 4 ?</p>
</li>
<li>
<p>passage du vert au rouge ou du rouge Ã  lâorange</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_comparer_des_objets">1.9. Comparer des objets</h3>
<div class="paragraph">
<p>En Java, lâopÃ©rateur <code>==</code> permet de comparer que deux objets ont bien la mÃªme <span class="underline">adresse mÃ©moire</span>.</p>
</div>
<div class="paragraph">
<p>Cependant, dans la majoritÃ© de cas, il est nÃ©cessaire de comparer si deux objets ont la mÃªme <span class="underline">valeur</span>.<br>
Dans ce cas, on utilisera la mÃ©thode <code>equals</code>.<br>
Cette mÃ©thode est dÃ©clarÃ©e sur la classe <code>java.lang.Object</code> dont tous les objets hÃ©ritent implicitement.<br>
Par dÃ©faut le comportement de cette mÃ©thode est dâutiliser lâopÃ©rateur <code>==</code>, mais elle est surchargeable !</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. Fichier Cat.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">color</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Cat</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">Cat</span> <span class="n">that</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Cat</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">color</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">color</span> <span class="o">&amp;&amp;</span> <span class="nc">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">that</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">return</span> <span class="nc">Objects</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La surcharge de la mÃ©thode <code>equals</code> pour un objet de type <code>Cat</code> va retourner <code>true</code> pour tout paramÃ¨tre qui est un objet de type <code>Cat</code> Ã©galement et dont la couleur (<code>color</code>) et le nom (<code>name</code>) sont les mÃªmes.</p>
</li>
<li>
<p>La mÃ©thode <code>equals</code> est toujours dÃ©finie <span class="underline">avec</span> la mÃ©thode <code>hashCode</code>.<br>
La mÃ©thode hashCode est utilisÃ©e dans plusieurs algorithmes liÃ©s Ã  lâidentitÃ©, notamment dans les <em>collections</em> et on considÃ¨re que son comportement <span class="underline">doit</span> Ãªtre cohÃ©rent avec celui de la mÃ©thode <code>equals</code>.<br>
Câest-Ã -dire que deux objets qui sont Ã©gaux au sens de la mÃ©thode <code>equals</code> doivent avoir le mÃªme <code>hashCode</code>, la rÃ©ciproque nâest pas vrai, deux objets ayant le mÃªme <code>hashCode</code> ne sont pas forcÃ©ment Ã©gaux (dans ce cas on parle de collision).</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_enum">1.10. Enum</h3>
<div class="paragraph">
<p>Les types Ã©numÃ©rÃ©s sont des classes dont les instances possibles sont limitÃ©es et uniques.<br>
Il nâest pas possible de crÃ©er de nouvelles instances dâun type Ã©numÃ©rÃ© avec le mot-clÃ© <code>new</code>.<br>
Les valeurs dâun type Ã©numÃ©rÃ© peuvent Ãªtre assimilÃ©es Ã  des constantes et accÃ©dÃ©es de la mÃªme faÃ§on.</p>
</div>
<div class="listingblock">
<div class="title">Listing 13. Fichier FacialHairStyle.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">enum</span> <span class="nc">FacialHairStyle</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="no">BEARDED</span><span class="o">,</span> // <b class="conum">(2)</b>
    <span class="no">MUSTACHE</span><span class="o">,</span>
    <span class="no">BOLD</span><span class="o">,</span>
    <span class="o">;</span>

    // <b class="conum">(3)</b>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isBold</span><span class="o">(</span><span class="nc">FacialHairStyle</span> <span class="n">hairStyle</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">FacialHairStyle</span><span class="o">.</span><span class="na">BOLD</span> <span class="o">==</span> <span class="n">hairStyle</span><span class="o">;</span> // <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la structure dâun type Ã©numÃ©rÃ© est proche de celle dâune classe, mais on remplace le mot-clÃ© <code>class</code> par <code>enum</code></p>
</li>
<li>
<p>le contenu dâun enum commence toujours par la liste des diffÃ©rentes valeurs possibles, sÃ©parÃ©es par des virgules <code>,</code> et se terminant par un point-virgule <code>;</code></p>
</li>
<li>
<p>la suite du contenu est la mÃªme que pour les classes, champs, constructeurs et mÃ©thodes peuvent Ãªtre ajoutÃ©s</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un enum peut avoir un constructeur, quand les valeurs de lâenum sont associÃ©es Ã  de la donnÃ©e.<br>
Cependant le constructeur dâun enum est implicitement <code>protected</code> et ne peut pas Ãªtre prÃ©fixÃ© par le mot-clÃ© <code>public</code>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 14. Fichier FacialHairStyle.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Environment</span> <span class="o">{</span>

    <span class="no">DEV</span><span class="o">(</span><span class="s">"http://localhost:9876/my-app"</span><span class="o">,</span> <span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">()),</span> // <b class="conum">(1)</b>
    <span class="no">TEST</span><span class="o">(</span><span class="s">"https://beta.mydomain.com/"</span><span class="o">,</span> <span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">UTC</span><span class="o">),</span>
    <span class="no">PROD</span><span class="o">(</span><span class="s">"https://app.mydomain.com/"</span><span class="o">,</span> <span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">UTC</span><span class="o">),</span>
    <span class="o">;</span>

    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">baseUrl</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="nc">ZoneId</span> <span class="n">zoneId</span><span class="o">;</span>

    <span class="nc">Environment</span><span class="o">(</span><span class="nc">String</span> <span class="n">baseUrl</span><span class="o">,</span> <span class="nc">ZoneId</span> <span class="n">zoneId</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">this</span><span class="o">.</span><span class="na">baseUrl</span> <span class="o">=</span> <span class="n">baseUrl</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">zoneId</span> <span class="o">=</span> <span class="n">zoneId</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>lâutilisation du constructeur se fait par lâajout de paramÃ¨tres entre parenthÃ¨ses aprÃ¨s chaque valeur</p>
</li>
<li>
<p>le constructeur sâÃ©crit comme celui dâune classe</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un enum peut implÃ©menter une interface, mais ne peut pas Ã©tendre une classe abstraite.</p>
</div>
<div class="paragraph">
<p>Par ailleurs un enum est implicitement <code>final</code> et ne peut pas Ãªtre Ã©tendu.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_record">1.11. Record</h3>
<div class="paragraph">
<p>Un record permet de dÃ©crire de maniÃ¨re concise une classe <em>anÃ©mique</em> (sans comportement) et immutable.<br>
Ainsi les mÃ©thodes <code>equals</code>, <code>hashCode</code>, <code>toString</code> ainsi que les accesseurs sont gÃ©nÃ©rÃ©s de maniÃ¨re Ã  reflÃ©ter les paramÃ¨tres du record.</p>
</div>
<div class="listingblock">
<div class="title">Listing 15. Fichier LocalTemperature.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">record</span> <span class="nf">LocalTemperature</span><span class="o">(</span>
    <span class="kt">double</span> <span class="n">temperature</span><span class="o">,</span>
    <span class="kt">double</span> <span class="n">latitude</span><span class="o">,</span>
    <span class="kt">double</span> <span class="n">longitude</span><span class="o">){}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 16. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">var</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LocalTemperature</span><span class="o">(</span><span class="mf">12.3</span><span class="no">D</span><span class="o">,</span> <span class="mf">48.8320315</span><span class="no">D</span><span class="o">,</span> <span class="mf">2.2277601</span><span class="no">D</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t1</span><span class="o">.</span><span class="na">temperature</span><span class="o">());</span> // <b class="conum">(1)</b>

        <span class="kt">var</span> <span class="n">temperatureList</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">t1</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">temperatureList</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">LocalTemperature</span><span class="o">(</span><span class="mf">12.3</span><span class="no">D</span><span class="o">,</span> <span class="mf">48.8320315</span><span class="no">D</span><span class="o">,</span> <span class="mf">2.2277601</span><span class="no">D</span><span class="o">)));</span> <span class="c1">// Displays true </span>// <b class="conum">(2)</b>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">t1</span><span class="o">);</span> <span class="c1">// Displays LocalTemperature[temperature=12.3, latitude=48.8320315, longitude=2.2277601] </span>// <b class="conum">(3)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>utilisation dâun des accesseurs gÃ©nÃ©rÃ©s</p>
</li>
<li>
<p>utilisation des mÃ©thodes gÃ©nÃ©rÃ©es <code>equals</code> et <code>hashCode</code> par lâalgorithme du <code>HashSet</code> (complexitÃ© en O(1))</p>
</li>
<li>
<p>utilisation de la mÃ©thode gÃ©nÃ©rÃ©e <code>toString</code></p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_deuxiÃ¨me_partie">2. Le langage Java, deuxiÃ¨me partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_formes_conditionnelles">2.1. Formes conditionnelles</h3>
<div class="sect3">
<h4 id="_if_else_if_else">2.1.1. if / else if / else</h4>
<div class="paragraph">
<p>Le mot clÃ© <code>if</code> permet dâexÃ©cuter de maniÃ¨re conditionnelle un bloc de code.<br>
Celui-ci prend en paramÃ¨tre une expression dont le rÃ©sultat est de type <code>boolean</code>.</p>
</div>
<div class="paragraph">
<p>On peut chainer les exÃ©cutions conditionnelles avec le mot clÃ© <code>else</code>.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(1)</b>
<span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(2)</b>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">// ... </span>// <b class="conum">(3)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ce bloc sera exÃ©cutÃ© si <code>a</code> vaut 1</p>
</li>
<li>
<p>ce bloc sera exÃ©cutÃ© si <code>a</code> ne vaut pas 1 <strong>et</strong> que <code>b</code> vaut 2</p>
</li>
<li>
<p>ce bloc sera exÃ©cutÃ© si <code>a</code> ne vaut pas 1 <strong>et</strong> que <code>b</code> ne vaut pas 2</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_switch">2.1.2. switch</h4>
<div class="paragraph">
<p>Dans le cas dâune condition determinÃ©e sur la base dâune seule variable, on peut utiliser les mots-clÃ©s <code>switch</code> et <code>case</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">switch</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
        <span class="c1">// ... </span>// <b class="conum">(1)</b>
        <span class="k">break</span><span class="o">;</span> // <b class="conum">(2)</b>
    <span class="k">case</span> <span class="mi">45</span><span class="o">:</span>
        <span class="c1">// ... </span>// <b class="conum">(3)</b>
    <span class="k">default</span><span class="o">:</span>
       <span class="c1">// ... </span>// <b class="conum">(4)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ce bloc sera exÃ©cutÃ© si <code>a</code> vaut 1</p>
</li>
<li>
<p>mot-clÃ© permettant de sortir du <code>switch</code></p>
</li>
<li>
<p>ce bloc sera exÃ©cutÃ© si <code>a</code> vaut 45</p>
</li>
<li>
<p>ce bloc sera exÃ©cutÃ© si <code>a</code> ne vaut pas 1</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le problÃ¨me de cette Ã©criture est quâil est facile dâoublier le mot-clÃ© <code>break</code> et dâintroduire un bug dans lequel plusieurs branches seront exÃ©cutÃ©es.<br>
Dans notre exemple, si la valeur de <code>a</code> est 45, le <code>case</code> correspondant sera exÃ©cutÃ©, ainsi que le bloc <code>default</code>.</p>
</div>
<div class="paragraph">
<p>Pour remÃ©dier Ã  cela il existe une seconde Ã©criture, dite <em>expression switch</em> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span> <span class="n">label</span> <span class="o">=</span> <span class="k">switch</span> <span class="o">(</span><span class="n">experience</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"case 1 and 2"</span><span class="o">);</span>
        <span class="n">yield</span> <span class="s">"Beginner and junior"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="s">"Experienced and senior"</span><span class="o">;</span>
    <span class="k">case</span> <span class="mi">5</span>    <span class="o">-&gt;</span> <span class="s">"Expert"</span><span class="o">;</span>
    <span class="k">default</span>   <span class="o">-&gt;</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">"invalid value"</span><span class="o">);</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette syntaxe, pas de <code>break</code>, câest la valeur Ã  droite de la flÃ¨che <code>&#8594;</code> qui est retournÃ©e, il nây a donc plus dâambiguÃ¯tÃ©.<br>
Dans le cas oÃ¹ la logique prend plus dâune expression, on indique la valeur Ã  retourner avec le mot-clÃ© <code>yield</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_opÃ©rateur_ternaire">2.1.3. OpÃ©rateur ternaire</h4>
<div class="paragraph">
<p>LâopÃ©rateur ternaire permet dâÃ©crire un bloc <code>if</code> Ã  deux branches de maniÃ¨re simple :<br>
<code>int a = "toto".equals(b) ? 3 : 0;</code><br>
est Ã©quivalent Ã </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">a</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="s">"toto"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">b</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boucles">2.2. Boucles</h3>
<div class="sect3">
<h4 id="_for">2.2.1. for</h4>
<div class="paragraph">
<p>Une boucle <code>for</code> est une boucle dans laquelle on accÃ¨de Ã  lâindex de lâitÃ©ration courante.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">index</span><span class="o">);</span> // <b class="conum">(2)</b>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>dÃ©claration dâune variable <code>index</code> qui prendra les valeurs de 1 Ã  4 exclus avec un pas de 1</p>
</li>
<li>
<p>cette ligne sera exÃ©cutÃ©e 3 fois avec les valeurs dâ<code>index</code> 1, 2 et 3</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_for_each">2.2.2. for each</h4>
<div class="paragraph">
<p>Les boucles <code>for</code> peuvent Ãªtre utilisÃ©e pour parcourir les Ã©lÃ¨ments dâun tableau ou dâune <em>collection</em>.<br>
Ainsi on peut Ã©crire :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">"Jake"</span><span class="o">,</span> <span class="s">"Rosa"</span><span class="o">,</span> <span class="s">"Raymond"</span><span class="o">,</span> <span class="s">"Gina"</span><span class="o">};</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">names</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">names</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici lâindex nâest pas utilisÃ© directement, câest un moyen dâaccÃ©der Ã  chacune des valeurs du tableau.<br>
Il est plus idiomatique dans ce cas dâutiliser un boucle <em>for each</em> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">"Jake"</span><span class="o">,</span> <span class="s">"Rosa"</span><span class="o">,</span> <span class="s">"Raymond"</span><span class="o">,</span> <span class="s">"Gina"</span><span class="o">};</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la variable <code>name</code> va pointer successivement sur tous les Ã©lÃ¨ments du tableau</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On peut mettre dans lâopÃ©rande de droite dâun <em>for each</em> un tableau ou tout objet implÃ©mentant lâinterface <code>java.lang.Iterable</code>.<br>
Cette interface est lâexpression minimale dont a besoin un ensemble dâobjets (telle quâune liste) pour Ãªtre parcouru.</p>
</div>
</div>
<div class="sect3">
<h4 id="_while">2.2.3. while</h4>
<div class="paragraph">
<p>Les boucles <code>while</code> permettent dâexÃ©cuter un bloc de code tant quâune expression est <em>vraie</em>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 17. Fichier TcpServer.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TcpServer</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">acceptingConnection</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">syncStart</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">9876</span><span class="o">);</span>
        <span class="n">acceptingConnection</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">acceptingConnection</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
            <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
            <span class="c1">// ... handle the socket</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">acceptingConnection</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la boucle va recommencer tant que la variable <code>acceptingConnection</code> sera <em>vraie</em>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_do_while">2.2.4. do while</h4>
<div class="paragraph">
<p>Dans le cas oÃ¹ lâÃ©valuation de la condition nÃ©cessite dâÃªtre faite Ã  lâissue de lâexÃ©cution du bloc, il est possible dâutiliser une boucle <code>do while</code>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 18. Fichier TcpServer.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MeteoWebServiceCaller</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MeteoHttpClient</span> <span class="n">client</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MeteoWebServiceCaller</span><span class="o">(</span><span class="nc">MeteoHttpClient</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">client</span> <span class="o">=</span> <span class="n">client</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getTemperatureWithRetry</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">NetworkFailureException</span> <span class="n">error</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> // <b class="conum">(1)</b>
        <span class="kt">int</span> <span class="n">tryCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">do</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="na">getTemperature</span><span class="o">();</span> // <b class="conum">(2)</b>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
                <span class="n">error</span> <span class="o">=</span> <span class="n">e</span><span class="o">;</span>
                <span class="n">tryCount</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">tryCount</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">);</span> // <b class="conum">(4)</b>
        <span class="k">throw</span> <span class="n">error</span><span class="o">;</span> // <b class="conum">(5)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la variable <code>error</code> est initialisÃ©e avec <code>null</code>, câest-Ã -dire quâelle ne pointe vers aucune adresse mÃ©moire</p>
</li>
<li>
<p>si la mÃ©thode <code>getTemperature</code> ne renvoie pas dâerreur, on sort de la mÃ©thode <code>callWebService</code> en retournant le rÃ©sultat</p>
</li>
<li>
<p>si la mÃ©thode <code>getTemperature</code> renvoie une erreur de type <code>IOException</code>, alors on affecte lâerreur Ã  la variable <code>error</code> et on incrÃ©mente la valeur de la variable <code>tryCount</code> de 1</p>
</li>
<li>
<p>le bloc <code>do</code> est recommencÃ© sâil y une erreur et que le compteur <code>tryCount</code> est infÃ©rieur Ã  4</p>
</li>
<li>
<p>si lâexÃ©cution arrive ici, câest quâil y a eu une erreur, et on lance la derniÃ¨re stockÃ©e dans la variable <code>error</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_break_et_continue">2.2.5. break et continue</h4>
<div class="paragraph">
<p>Dans toutes les boucles il est possible dâutiliser les mots-clÃ©s <code>break</code> et <code>continue</code>.</p>
</div>
<div class="paragraph">
<p>Lâinstruction <code>break</code> permet de sortir immÃ©diatement de la boucle.</p>
</div>
<div class="paragraph">
<p>Lâinstruction <code>continue</code> permet de stopper lâexÃ©cution de lâitÃ©ration courante et de passer Ã  la prochaine, sâil y en a une.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">2.3. Exceptions</h3>
<div class="paragraph">
<p>Les exceptions en Java sont une des deux formes de retour dâune mÃ©thode.<br>
Celle-ci peut se terminer en succÃ¨s et renvoyer une donnÃ©e (rien si sont type de retour est <code>void</code>) ou <em>lancer</em> une erreur.</p>
</div>
<div class="paragraph">
<p>Une erreur remonte la pile dâappel jusquâÃ  Ãªtre interceptÃ©e.<br>
Si elle nâest jamais interceptÃ©e, elle provoque lâarrÃªt du thread.<br>
Dans le cas du thread principal (dÃ©coulant de la fonction <code>main</code>), câest lâapplication qui sâarrÃªte.</p>
</div>
<div class="paragraph">
<p>Pour lancer une erreur, on utilise le mot-clÃ© <code>throw</code>.<br>
Le mot-clÃ© <code>throws</code> (avec un <code>s</code>) lui permet de dÃ©clarer quâune mÃ©thode est susceptible de lancer un certain nombre dâerreurs.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 19. Fichier MathUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MathUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">divide</span><span class="o">(</span><span class="kt">int</span> <span class="n">dividend</span><span class="o">,</span> <span class="kt">int</span> <span class="n">divisor</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IllegalArgumentException</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="k">if</span> <span class="o">(</span><span class="n">divisor</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Cannot divide by 0"</span><span class="o">);</span> // <b class="conum">(2)</b>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">dividend</span> <span class="o">/</span> <span class="n">divisor</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la mÃ©thode <code>divide</code> dÃ©clare quâelle peut lancer une erreur de type <code>IllegalArgumentException</code></p>
</li>
<li>
<p>si le second paramÃ¨tre de la mÃ©thode est 0, une erreur est lancÃ©e</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pour intercepter des erreurs, on utilise un bloc <code>try catch</code>.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 20. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">dividend</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="kt">int</span> <span class="n">divisor</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
        <span class="k">try</span> <span class="o">{</span> // <b class="conum">(1)</b>
            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MathUtils</span><span class="o">().</span><span class="na">divide</span><span class="o">(</span><span class="n">dividend</span><span class="o">,</span> <span class="n">divisor</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span> // <b class="conum">(2)</b>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IllegalArgumentException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"An error has occurred: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span> // <b class="conum">(4)</b>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>dÃ©claration dâun bloc <code>try</code></p>
</li>
<li>
<p>cette ligne nâest pas exÃ©cutÃ©e si une erreur est lancÃ©e par la ligne prÃ©cÃ©dente</p>
</li>
<li>
<p>intercepte les erreurs de type <code>IllegalArgumentException</code> lancÃ©es dans le bloc <code>try</code> associÃ©</p>
</li>
<li>
<p>accÃ¨s au message de lâerreur, on lâoccurence : <code>Cannot divide by 0</code>;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Toutes les erreurs pouvant Ãªtre <em>lancÃ©es</em> implÃ©mentent lâinterface <code>java.lang.Throwable</code>.<br>
Cette interface est implementÃ©e par 3 classes majeures, qui spÃ©cialisent leurs classes enfants :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.lang.Error</code> : les erreurs graves qui sont du ressort de la JVM et non de lâapplication. Il est conseillÃ© de ne pas intercepter ces erreurs</p>
</li>
<li>
<p><code>java.lang.Exception</code> : exceptions dites <em>checked</em>. Il sâagit dâerreurs applicatives dont la possibilitÃ© doit Ãªtre dÃ©clarÃ©e par la mÃ©thode. Cette dÃ©claration se fait au niveau de la signature de la mÃ©thode au moyen du mot-clÃ© <code>throws</code>. La compilation Ã©chouera si une mÃ©thode ne dÃ©clare pas une exception mais que le code Ã  lâintÃ©rieur est susceptible de la produire. Exemple dâune de ces erreurs : <code>java.io.IOException</code> tÃ©moignant dâun problÃ¨me IO (entrÃ©e / sortie), lecture dâun fichier impossible, erreur rÃ©seau, etc.</p>
</li>
<li>
<p><code>java.lang.RuntimeException</code> : exceptions dites <em>unchecked</em>. Il sâagit dâerreurs applicatives dont la possibilitÃ© peut ne pas Ãªtre dÃ©clarÃ©e par la mÃ©thode. Il est cependant recommandÃ© de documenter cette possibilitÃ© en rajoutant lâexception dans la signature de la mÃ©thode. Exemple dâune de ces erreurs : <code>java.lang.IllegalArgumentException</code> tÃ©moignant du mauvais usage dâune mÃ©thode.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_interfaces">2.4. Interfaces</h3>
<div class="paragraph">
<p>Les interfaces sont des contrats dâobjet composables.<br>
Ce contrat contient des signatures de mÃ©thodes quâun objet concret doit dÃ©finir sâil lâimplÃ©mente.<br>
Ainsi une interface nâa ni Ã©tat, ni mÃ©thodes concrÃ¨tes.<br>
Les champs dâune interface sont implicitement <code>public</code>, <code>static</code> et <code>final</code>, câest-Ã -dire quâil sâagit de constantes.<br>
Toutes les mÃ©thodes abstraites sont quant Ã  elles implicitement <code>public</code>.<br>
On ne peut pas instancier une interface, mais on peut utiliser lâutiliser comme type de champ, de paramÃ¨tre ou de variable.</p>
</div>
<div class="paragraph">
<p>Les interfaces permettent dâabstraire lâ<span class="underline">utilisation</span> de lâ<span class="underline">implÃ©mentation</span>.</p>
</div>
<div class="paragraph">
<p>LâintÃ©rÃªt de cette abstraction est de pouvoir substituer une implÃ©mentation par une autre sans avoir Ã  changer le code qui lâutilise.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 21. Fichier Animal.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>

    <span class="nc">String</span> <span class="nf">makeACry</span><span class="o">();</span>

    <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">);</span>

    <span class="kd">enum</span> <span class="nc">FeedingStatus</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="no">ACCEPTED</span><span class="o">,</span>
        <span class="no">REFUSED</span><span class="o">,</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>un type dÃ©clarÃ© dans une interface sera implicitement <code>public</code> et <code>static</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 22. Fichier Lion.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lion</span> <span class="kd">implements</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nd">@Override</span> // <b class="conum">(1)</b>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">return</span> <span class="s">"Lion"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">makeACry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Groarrrr"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"meat"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">foodType</span><span class="o">)</span> <span class="o">?</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">ACCEPTED</span> <span class="o">:</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">REFUSED</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>annotation prÃ©cisant quâil sâagit dâune surcharge, optionnelle</p>
</li>
<li>
<p>le mot-clÃ© <code>public</code> est nÃ©cessaire ici, il nâest pas implicite dans une classe</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 23. Fichier Cow.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cow</span> <span class="kd">implements</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Cow"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">makeACry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Meuuuuh"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"grass"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">foodType</span><span class="o">)</span> <span class="o">?</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">ACCEPTED</span> <span class="o">:</span> <span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">REFUSED</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 24. Fichier Launcher.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Launcher</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Animal</span><span class="o">&gt;</span> <span class="n">animals</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">Lion</span><span class="o">(),</span>
            <span class="k">new</span> <span class="nf">Cow</span><span class="o">()</span>
        <span class="o">);</span>

        <span class="nc">String</span> <span class="n">foodType</span> <span class="o">=</span> <span class="s">"meat"</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Animal</span> <span class="n">animal</span> <span class="o">:</span> <span class="n">animals</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(1)</b>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The"</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="na">name</span><span class="o">()</span> <span class="o">+</span> <span class="s">" makes "</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="na">cry</span><span class="o">());</span>
            <span class="kd">final</span> <span class="nc">String</span> <span class="n">eatSentence</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="nc">FeedingStatus</span><span class="o">.</span><span class="na">ACCEPTED</span> <span class="o">==</span> <span class="n">animal</span><span class="o">.</span><span class="na">feed</span><span class="o">(</span><span class="n">foodType</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">eatSentence</span> <span class="o">=</span> <span class="s">"eats"</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">eatSentence</span> <span class="o">=</span> <span class="s">"refuses to eat"</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"It "</span> <span class="o">+</span> <span class="n">eatSentence</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">foodType</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>seul le concept dâ<code>Animal</code> est manipulÃ© ici, nous garantissant que tous les objets implÃ©mentant cette interface ont les mÃ©thodes <code>name</code>, <code>cry</code> et <code>feed</code></p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_mÃ©thodes_concrÃ¨tes">2.4.1. MÃ©thodes concrÃ¨tes</h4>
<div class="paragraph">
<p>Une interface peut possÃ©der des mÃ©thodes <em>concrÃ¨tes</em> statiques, souvent utilisÃ©es comme mÃ©thodes utilitaires.</p>
</div>
<div class="paragraph">
<p>Une interface peut Ã©galement possÃ©der des mÃ©thodes <em>concrÃ¨tes</em> par dÃ©faut.<br>
Il sâagit la plupart du temps de comportements reposant sur dâautres mÃ©thodes abstraites permettant dâapporter une fonctionnalitÃ© de maniÃ¨re transverse Ã  toutes les classes implÃ©mentant cette interface.</p>
</div>
<div class="paragraph">
<p>LâintÃ©rÃªt de cette approche est que cet ajout de fonctionnalitÃ©, contrairement Ã  lâutilisation dâune classe abstraite, garde une caractÃ©ristique principale des interfaces : la composition.</p>
</div>
<div class="paragraph">
<p>En effet, un objet peut implÃ©menter plusieurs interfaces.</p>
</div>
<div class="listingblock">
<div class="title">Listing 25. Fichier Animal.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>

    <span class="k">default</span> <span class="nc">String</span> <span class="nf">formattedName</span><span class="o">()</span> <span class="o">{</span> // <b class="conum">(1)</b>
        <span class="k">return</span> <span class="nf">name</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">+</span> <span class="n">name</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>mÃ©thode disponible sur tous les objets implÃ©mentant cette interface, peu importe la maniÃ¨re dont la mÃ©thode abstraite <code>name</code> est implÃ©mentÃ©e</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_abstraites">2.5. Classes abstraites</h3>
<div class="paragraph">
<p>Si une classe peut implÃ©menter plusieurs interfaces, elle ne peut hÃ©riter que dâune seule classe parente.<br>
On parle alors dâhÃ©ritage, et lâhÃ©ritage multiple nâexiste pas en Java.<br>
On oppose le concept de composition, plus souple, au concept dâhÃ©ritage, souvent dÃ©criÃ© car peu Ã©volutif.</p>
</div>
<div class="paragraph">
<p>Une classe concrÃ¨te peut hÃ©riter dâune classe abstraite en implÃ©mentant toutes ses mÃ©thodes abstraites.<br>
Une classe abstraite peut donc avoir des mÃ©thodes concrÃ¨tes, mais aussi des mÃ©thodes abstraites, Ã  lâinstar dâune interface.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="title">Listing 26. Fichier Animal.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">protected</span> <span class="nf">Animal</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">formattedName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">toUpperCase</span><span class="o">()</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="nc">FeedingStatus</span> <span class="nf">feed</span><span class="o">(</span><span class="nc">String</span> <span class="n">foodType</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_troisiÃ¨me_partie">3. Le langage Java, troisiÃ¨me partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gÃ©nÃ©ricitÃ©">3.1. GÃ©nÃ©ricitÃ©</h3>
<div class="paragraph">
<p>Les types gÃ©nÃ©riques sont un moyen dâexprimer une relation entre un type et les types utilisÃ©s par son Ã©tat, les sous-types.<br>
Les collections sont des types gÃ©nÃ©riques qui permettent dâexprimer le type des Ã©lÃ©ments quâelles peuvent contenir, indÃ©pendamment de leur fonctionnement.<br>
On peut donc avoir une liste de <code>String</code>, dâ<code>Integer</code>, ou de nâimporte quel type dâobjet.</p>
</div>
<div class="paragraph">
<p>LâintÃ©rÃªt dâune telle Ã©criture est de lier un (ou plusieurs) sous-type Ã  une instance.<br>
Ainsi en crÃ©ant une liste de <code>String</code>, on ne pourra y ajouter que des <code>String</code>.</p>
</div>
<div class="paragraph">
<p>DÃ©clarer un type gÃ©nÃ©rique se fait grÃ¢ce aux chevrons : <code>List&lt;String&gt;</code>.<br>
Quand le ou les sous-types sont infÃ©rables par le compilateur, ils peuvent Ãªtre omis en ne gardant que les chevrons : <code>List&lt;String&gt; names = new ArrayList&lt;&gt;()</code>.<br>
Cette Ã©criture est appelÃ©e <em>diamond operator</em> en rÃ©fÃ©rence Ã  la forme des deux chevrons <code>&lt;&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Il est tout Ã  fait possible de dÃ©clarer ses propres types gÃ©nÃ©riques :</p>
</div>
<div class="listingblock">
<div class="title">Listing 27. Fichier Item.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Item</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>
    <span class="kt">double</span> <span class="nf">price</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 28. Fichier Basket.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Basket</span><span class="o">&lt;</span><span class="no">I</span> <span class="kd">extends</span> <span class="nc">Item</span><span class="o">&gt;</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="no">I</span> <span class="n">item</span><span class="o">);</span> // <b class="conum">(2)</b>

    <span class="kt">double</span> <span class="nf">totalPrice</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>lâinterface <code>Basket</code> dÃ©finit un sous-type <code>I</code> qui doit implÃ©menter lâinterface <code>Item</code><br>
<code>I</code> est donc un prÃªte-nom pour nâimporte quel type implÃ©mentant <code>Item</code></p>
</li>
<li>
<p>la mÃ©thode <code>add</code> prend en paramÃ¨tre un objet de type I, soit nâimporte quel objet qui implÃ©mente <code>Item</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 29. Fichier MarketItem.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MarketItem</span> <span class="kd">extends</span> <span class="nc">Item</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="kt">double</span> <span class="nf">weight</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Lâinterface <code>MarketItem</code> Ã©tend lâinterface <code>Item</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Listing 30. Fichier MarketBasket.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MarketBasket</span> <span class="kd">implements</span> <span class="nc">Basket</span><span class="o">&lt;</span><span class="nc">MarketItem</span><span class="o">&gt;</span> <span class="o">{</span> // <b class="conum">(1)</b>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">MAX_WEIGHT_IN_KG</span> <span class="o">=</span> <span class="mf">3.0</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MarketItem</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">MarketItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(2)</b>
        <span class="k">if</span> <span class="o">(</span><span class="n">totalWeight</span><span class="o">()</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="na">weight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="no">MAX_WEIGHT_IN_KG</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">MarketBasketFullException</span><span class="o">(</span><span class="s">"Carry these water bottles yourself !"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">double</span> <span class="nf">totalWeight</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">items</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToDouble</span><span class="o">(</span><span class="nl">MarketItem:</span><span class="o">:</span><span class="n">weight</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">totalPrice</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">items</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToDouble</span><span class="o">(</span><span class="nl">MarketItem:</span><span class="o">:</span><span class="n">price</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>la classe <code>MarketBasket</code> implÃ©mente lâinterface <code>Basket</code> avec comme sous-type <code>I</code> de celle-ci lâinterface <code>MarketItem</code></p>
</li>
<li>
<p>la mÃ©thode <code>add</code> ne pourra prendre en paramÃ¨tre que des objets qui implÃ©mentent <code>MarketItem</code></p>
</li>
<li>
<p>si le poids du panier avec le nouvel Ã©lÃ©ment dÃ©passe le max, une erreur est lancÃ©e</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_collections">3.2. Collections</h3>
<div class="paragraph">
<p>Ã la diffÃ©rence des tableaux, les collections sont des objets, ont des mÃ©thodes et la plupart du temps, leur taille peut varier.</p>
</div>
<div class="paragraph">
<p>Ces structures de donnÃ©es se spÃ©cialisent au travers de plusieurs interfaces et classes fournies par la bibliothÃ¨que standard, mais toutes implÃ©mentent lâinterface <code>java.lang.Iterable</code>.</p>
</div>
<div class="paragraph">
<p>Cette interface est tout ce dont a besoin la machine virtuelle pour itÃ©rer.<br>
En effet, cette interface comporte principalement une mÃ©thode <code>iterator</code> renvoyant un objet de type <code>java.util.Iterator</code>.<br>
A son tour cette interface a deux mÃ©thodes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hasNext</code> renvoyant un <code>boolean</code></p>
</li>
<li>
<p><code>next</code> renvoyant un objet ou lanÃ§ant une <code>NoSuchElementException</code> sâil nây a plus dâÃ©lÃ©ments Ã  parcourir</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ainsi en appelant la mÃ©thode <code>Iterable#iterator()</code>, on rÃ©cupÃ¨re un curseur permettant dâitÃ©rer sur les Ã©lÃ©ments dâun ensemble.<br>
Mais rien ne prÃ©cise si cet ensemble est fini.</p>
</div>
<div class="listingblock">
<div class="title">Listing 31. Fichier NameUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameUtils</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">displayNames</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">namesIterator</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span> // <b class="conum">(1)</b>
        <span class="k">while</span> <span class="o">(</span><span class="n">namesIterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span> // <b class="conum">(2)</b>
            <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">namesIterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span> // <b class="conum">(3)</b>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>crÃ©ation dâun nouvel <code>Iterator</code></p>
</li>
<li>
<p>tant quâil y aura un Ã©lÃ©ment <em>aprÃ¨s</em>, la boucle continuera</p>
</li>
<li>
<p>on fait avancer dâun cran le curseur en lui demandant de renvoyer le prochain Ã©lÃ©ment</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Câest lâinterface <code>java.util.Collection</code> qui apporte, entre autres, la mÃ©thode <code>size</code> et ainsi spÃ©cialise ses sous-types en ensembles dâÃ©lÃ©ments <span class="underline">finis</span>.<br>
Elle apporte Ã©galement des mÃ©thodes pour ajouter, supprimer et chercher des Ã©lÃ©ments dans lâensemble.</p>
</div>
<div class="paragraph">
<p>Les opÃ©rations dâajout, de recherche ou de suppression dâÃ©lÃ©ments reposent sur les deux fonctions dâidentitÃ©, <code>equals</code> et <code>hashCode</code>.<br>
Ainsi tout Ã©lÃ©ment placÃ© dans une collection doit rÃ©-implÃ©menter ces deux mÃ©thodes.<br>
Dans le cas contraire, les mÃ©thodes des collections ne se comporteront pas comme attendu.</p>
</div>
<div class="sect3">
<h4 id="_list">3.2.1. List</h4>
<div class="paragraph">
<p>La caractÃ©ristique principale de lâinterface <code>java.util.List</code>, est quâelle garantit que les Ã©lÃ©ments de lâensemble sont <span class="underline">ordonnÃ©s</span>.<br>
Cette interface apporte donc des mÃ©thodes pour ajouter ou supprimer des Ã©lÃ©ments par leur index.</p>
</div>
<div class="paragraph">
<p>LâimplÃ©mentation la plus simple est <code>java.util.ArrayList</code> et repose sur un stockage des Ã©lÃ©ments dans un tableau.<br>
Par dÃ©faut la taille de ce tableau est de 10.<br>
Si on essaie dâajouter plus dâÃ©lÃ©ments que la capacitÃ© courante du tableau, la liste crÃ©era un nouveau tableau de capacitÃ© supÃ©rieure et y copiera les Ã©lÃ©ments du prÃ©cÃ©dent tableau ainsi que les nouveaux.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span> // <b class="conum">(1)</b>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(2)</b>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>

<span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Jane"</span><span class="o">,</span> <span class="mi">61</span><span class="o">));</span> // <b class="conum">(3)</b>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="c1">// size = 2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La variable <code>people</code> de type <code>List</code> pointe sur un nouvel objet de type <code>ArrayList</code></p>
</li>
<li>
<p>ajout dâun Ã©lÃ©ment dans la liste</p>
</li>
<li>
<p>tentative de suppression dâun Ã©lÃ©ment de la liste, qui retournera <code>false</code> car lâÃ©lÃ©ment en est absent</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_set">3.2.2. Set</h4>
<div class="paragraph">
<p>La caractÃ©ristique principale de lâinterface <code>java.util.Set</code>, est quâelle garantit quâil nây a pas de <span class="underline">doublons</span> dans lâensemble.<br>
Ainsi insÃ©rer plus dâune fois un mÃªme objet dans lâensemble ne fera rien.</p>
</div>
<div class="paragraph">
<p>LâimplÃ©mentation la plus simple est <code>java.util.HashSet</code> et repose sur une <code>java.util.HashMap</code>, en stockant les Ã©lÃ©ments en tant que clÃ©s de la <code>Map</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span> // <b class="conum">(1)</b>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
<span class="n">people</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(2)</b>

<span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(3)</b>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="c1">// size = 1</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La variable <code>people</code> de type <code>Set</code> pointe sur un nouvel objet de type <code>HashSet</code></p>
</li>
<li>
<p>cet ajout nâaura aucun effet, car lâensemble contient dÃ©jÃ  cet Ã©lÃ©ment</p>
</li>
<li>
<p>suppression dâun Ã©lÃ©ment, qui retournera <code>true</code> car lâÃ©lÃ©ment Ã©tait bien prÃ©sent</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_map">3.2.3. Map</h4>
<div class="paragraph">
<p>Lâinterface <code>java.util.Map</code> nâimplÃ©mente pas <code>java.util.Collection</code>, ni mÃªme <code>java.lang.Iterable</code> en Java, mais on la considÃ¨re nÃ©anmoins comme "une collection" du fait de son usage similaire.<br>
Il sâagit dâun ensemble dâassociations clÃ© &#8594; valeur.</p>
</div>
<div class="paragraph">
<p>LâimplÃ©mentation la plus simple est <code>java.util.HashMap</code> et repose sur le principe de clÃ© de hachage, calculÃ©e grÃ¢ce Ã  la mÃ©thode <code>hashCode</code>.<br>
LâÃ©tat dâune <code>HashMap</code> est stockÃ© dans un tableau, de taille 16 par dÃ©faut.</p>
</div>
<div class="paragraph">
<p>Quand on ajoute une paire (clÃ© &#8594; valeur), le <code>hashCode</code> de la clÃ© est calculÃ©.<br>
Ensuite on applique Ã  cette valeur lâopÃ©rateur modulo <code>%</code> avec la taille du tableau.<br>
Ainsi on obtient un index compris entre 0 et la taille du tableau (exclue).<br>
Ã cet index, si la cellule est vide, on insÃ¨re une liste chaÃ®nÃ©e (<code>java.util.LinkedList</code>) avec comme seul Ã©lÃ©ment la valeur.<br>
Si la cellule nâest pas vide, câest quâil y a collision, deux Ã©lÃ©ments ont un <code>hashCode</code> dont le modulo avec la taille du tableau est le mÃªme.<br>
Dans ce cas, on ajoute la valeur Ã  la liste chaÃ®nÃ©e dÃ©jÃ  prÃ©sente.<br>
Quand le nombre dâentrÃ©es dans le tableau est supÃ©rieur Ã  un certain seuil (le <em>load factor</em>, par dÃ©faut Ã  75%), un nouveau tableau du double de la taille prÃ©cÃ©dente est crÃ©Ã© et les valeurs y sont redistribuÃ©es.</p>
</div>
<div class="paragraph">
<p>LâintÃ©rÃªt de cette technique est quâaccÃ©der Ã  une valeur par sa clÃ© prendra toujours le mÃªme temps, quelle que soit la taille de la <code>HashMap</code>.<br>
Pour savoir si un Ã©lÃ©ment est dans une liste, il faut la parcourir jusquâÃ  tomber sur lâÃ©lÃ©ment en question ou la fin de la liste.<br>
Avec une <code>HashMap</code> on calculera le <code>hashCode</code> de lâÃ©lÃ©ment Ã  trouver, et en considÃ©rant quâil nây a pas de collision (en pratique il y en a peu), il suffit dâaccÃ©der Ã  lâindex du tableau correspondant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Person</span><span class="o">&gt;</span> <span class="n">peopleByName</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">59</span><span class="o">));</span> // <b class="conum">(1)</b>
<span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
<span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">,</span> <span class="mi">23</span><span class="o">));</span> // <b class="conum">(2)</b>

<span class="nc">Person</span> <span class="n">martin</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Martin"</span><span class="o">);</span> // <b class="conum">(3)</b>

<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="c1">// size = 2</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ajout dâune valeur de type <code>Person</code> associÃ©e Ã  une clÃ© de type <code>String</code></p>
</li>
<li>
<p>remplacement de la valeur Ã  la clÃ© <code>"Martin"</code></p>
</li>
<li>
<p>accÃ¨s Ã  une valeur par sa clÃ©</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_streams">3.3. Streams</h3>
<div class="paragraph">
<p>Les streams, ou flux, sont inspirÃ©s de la programmation fonctionnelle qui tend Ã  transformer des ensembles dâobjets en dâautres ensembles dâobjets grÃ¢ce Ã  des <em>fonctions</em> simples et composables.</p>
</div>
<div class="paragraph">
<p>Les streams en Java sont des pipelines de transformation qui implÃ©mentent lâinterface gÃ©nÃ©rique <code>java.util.stream.Stream</code>.</p>
</div>
<div class="paragraph">
<p>Un stream peut Ãªtre obtenu de plusieurs faÃ§ons, les plus frÃ©quentes Ã©tant :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ã  partir de valeurs :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Stream&lt;Integer&gt; ages = Stream.of(1, 4, 5, 4568);</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ã  partir dâune <code>Collection</code> :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Set&lt;String&gt; names = Set.of("Donald", "Daisy");
Stream&lt;String&gt; nameStream = names.stream();</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ã  partir dâun itÃ©rateur</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>List&lt;String&gt; languages = List.of(
        "Java",
        "Kotlin",
        "Scala",
        "Go",
        "Rust");
Iterator&lt;String&gt; languageIterator = languages.iterator();
Stream&lt;String&gt; languageStream = StreamSupport.stream(
        Spliterators.spliteratorUnknownSize(
                languageIterator,
                Spliterator.ORDERED)
        , false);</pre>
</div>
</div>
<div class="paragraph">
<p>Un <code>Stream&lt;T&gt;</code> supporte principalement 3 faÃ§ons dâappliquer des transformations :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>map</code></p>
<div class="ulist">
<ul>
<li>
<p>transforme un ensemble dâobjets en un nouvel ensemble de mÃªme taille</p>
</li>
<li>
<p>prend en paramÃ¨tre une <code>Function&lt;T, U&gt;</code> transformant un objet de type <code>T</code> en un objet de type <code>U</code></p>
</li>
<li>
<p>renvoie un nouveau <code>Stream&lt;U&gt;</code> en appliquant la fonction sur chacun des Ã©lÃ©ments</p>
</li>
<li>
<p>exemple :</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Set&lt;Person&gt; people = Set.of(
        new Person("Donald", 32),
        new Person("Daisy", 33)
);
Stream&lt;Integer&gt; ageStream = people.stream().map(p -&gt; p.age);</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/stream_op_map.png" alt="stream op map">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filter</code></p>
<div class="ulist">
<ul>
<li>
<p>transforme un ensemble dâobjets en un nouvel ensemble de mÃªme taille ou de taille infÃ©rieure</p>
</li>
<li>
<p>prend en paramÃ¨tre un <code>Predicate&lt;T&gt;</code> transformant un objet de type <code>T</code> en un <code>boolean</code></p>
</li>
<li>
<p>renvoie un nouveau <code>Stream&lt;T&gt;</code> en ne gardant que les Ã©lÃ©ments pour lesquels le prÃ©dicat a renvoyÃ© <code>true</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Set&lt;Person&gt; people = Set.of(
        new Person("Donald", 32),
        new Person("Daisy", 33),
        new Person("Riri", 10),
        new Person("Fifi", 11),
        new Person("Loulou", 12)

);
Stream&lt;Person&gt; adultStream = people.stream().filter(p -&gt; p.age &gt; 18);</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/stream_op_filter.png" alt="stream op filter">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flatMap</code></p>
<div class="ulist">
<ul>
<li>
<p>transforme un ensemble dâobjets en un nouvel ensemble, la plupart du temps de taille supÃ©rieure</p>
</li>
<li>
<p>prend en paramÃ¨tre une fonction <code>Function&lt;T, Stream&lt;U&gt;&gt;</code> transformant un objet de type <code>T</code> en un stream dâobjets de type <code>U</code></p>
</li>
<li>
<p>renvoie un nouveau <code>Stream&lt;U&gt;</code> Ã©tant la concatÃ©nation des streams rÃ©sultant de lâapplication de la fonction Ã  chacun des Ã©lÃ©ments.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Alix"</span><span class="o">,</span> <span class="mf">12.2</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Ilian"</span><span class="o">,</span> <span class="mf">11.3</span><span class="o">,</span> <span class="mf">18.5</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Robin"</span><span class="o">,</span> <span class="mf">15.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">16.0</span><span class="o">)</span>

<span class="o">);</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">gradeStream</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">grades</span><span class="o">.</span><span class="na">stream</span><span class="o">());</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/stream_op_flatmap.png" alt="stream op flatmap">
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Afin de transformer un stream en collection, on utilise lâ<em>opÃ©ration terminale</em> <code>collect</code>.<br>
Cette mÃ©thode prend en paramÃ¨tre un <code>java.util.stream.Collector</code> dont les principales implÃ©mentations peuvent Ãªtre construites grÃ¢ce aux mÃ©thodes utilitaires de la classe <code>java.util.stream.Collectors</code>.</p>
</div>
<div class="paragraph">
<p>Ã noter que les multiples transformations ajoutÃ©es sur un stream ne sont exÃ©cutÃ©es que si nÃ©cessaire et uniquement au moment de lâappel dâune opÃ©ration terminale.</p>
</div>
<div class="paragraph">
<p>Une <em>opÃ©ration terminale</em>, telle que <code>count</code>, <code>collect</code>, <code>reduce</code>, etc. est une opÃ©ration dont le retour nÃ©cessite lâapplication des transformations.<br>
Une fois une <em>opÃ©ration terminale</em> appelÃ©e sur un stream, celui-ci devient inutilisable.</p>
</div>
<div class="paragraph">
<p>Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Donald"</span><span class="o">,</span> <span class="mi">32</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Daisy"</span><span class="o">,</span> <span class="mi">33</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Riri"</span><span class="o">,</span> <span class="mi">10</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Fifi"</span><span class="o">,</span> <span class="mi">11</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"Loulou"</span><span class="o">,</span> <span class="mi">12</span><span class="o">)</span>

<span class="o">);</span>
<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">adultStream</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="o">)</span>
                            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span> // <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>construit un nouveau <code>HashSet</code> avec les deux Ã©lÃ©ments retenus par le prÃ©dicat</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ou encore</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="nc">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Alix"</span><span class="o">,</span> <span class="s">"3A"</span><span class="o">,</span> <span class="mf">12.2</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Ilian"</span><span class="o">,</span> <span class="s">"3A"</span><span class="o">,</span> <span class="mf">11.3</span><span class="o">,</span> <span class="mf">18.5</span><span class="o">,</span> <span class="mf">14.0</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"Robin"</span><span class="o">,</span> <span class="s">"4A"</span><span class="o">,</span> <span class="mf">15.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">16.0</span><span class="o">)</span>

<span class="o">);</span>
<span class="kt">double</span> <span class="n">averageGrade</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="s">"3A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">))</span>
        <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">grades</span><span class="o">.</span><span class="na">stream</span><span class="o">())</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">averagingDouble</span><span class="o">(</span><span class="nl">Double:</span><span class="o">:</span><span class="n">doubleValue</span><span class="o">));</span> // <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Calcule la moyenne des notes des Ã©tudiants du groupe 3A</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_expressions_lambda">3.4. Expressions Lambda</h3>
<div class="paragraph">
<p>En Java tout est objet, y compris les <em>fonctions</em>.</p>
</div>
<div class="paragraph">
<p>Ainsi Ã©crire</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">groupPredicate</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="s">"4A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>revient Ã  crÃ©er une instance dâune implÃ©mentation Ã  la volÃ©e de lâinterface <code>Predicate</code>.</p>
</div>
<div class="paragraph">
<p>Câest fonctionnellement Ã©quivalent Ã  :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">groupPredicate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;()</span> <span class="o">{</span> // <b class="conum">(1)</b>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Student</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"4A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>construction dâune classe anonyme, construction Ã  la volÃ©e dâune instance dâune classe non nommÃ©e et dont lâusage est localisÃ© au bloc oÃ¹ elle est dÃ©finie</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ou encore Ã  :</p>
</div>
<div class="listingblock">
<div class="title">Listing 32. Fichier GroupPredicate</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GroupPredicate</span> <span class="kd">implements</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Student</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"4A"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">groupPredicate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GroupPredicate</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette Ã©criture <em>raccourcie</em> avec une flÃ¨che <code>&#8594;</code> est appelÃ©e <em>expression lambda</em> ou <em>lambda function</em>.<br>
Le type dâune expression lambda doit Ãªtre infÃ©rÃ© par le compilateur et doit Ãªtre spÃ©cifiÃ© au moment de sa crÃ©ation, soit par le type du paramÃ¨tre dâune mÃ©thode, soit par le type dâune variable (comme dans notre prÃ©cÃ©dent exemple).</p>
</div>
<div class="paragraph">
<p>Le type dâune expression lambda ne peut Ãªtre quâune interface Ã  une seule mÃ©thode <em>abstraite</em>.</p>
</div>
<div class="paragraph">
<p>Afin de garantir cette spÃ©cificitÃ©, il est possible dâannoter une interface avec <code>@FunctionalInterface</code>.<br>
AnnotÃ©e de la sorte une interface qui ne possÃ¨de pas de mÃ©thode abstraite ou plus dâune mÃ©thode abstraite ne compilera pas.</p>
</div>
<div class="paragraph">
<p>Il est Ã©galement possible dâutiliser une rÃ©fÃ©rence de mÃ©thode comme fonction.<br>
Pour cela, le type de retour, le nombre et le type des paramÃ¨tres doit correspondre, comme pour une expression lambda.<br>
On utilise lâopÃ©rateur <code>::</code> pour diffÃ©rencier cette Ã©criture dâun appel de mÃ©thode classique.<br>
Par exemple :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kt">double</span> <span class="nf">computeAverageGrade</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">students</span><span class="o">,</span> <span class="nc">String</span> <span class="n">group</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nl">Objects:</span><span class="o">:</span><span class="n">nonNull</span><span class="o">)</span> // <b class="conum">(1)</b>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">group</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">group</span><span class="o">))</span>
        <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">grades</span><span class="o">.</span><span class="na">stream</span><span class="o">())</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">averagingDouble</span><span class="o">(</span><span class="nl">Double:</span><span class="o">:</span><span class="n">doubleValue</span><span class="o">));</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>on ne garde que les Ã©lÃ©ments non <code>null</code> de la collection passÃ©e en paramÃ¨tre de la mÃ©thode</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une rÃ©fÃ©rence de mÃ©thode peut Ã©galement sâÃ©crire avec une lambda, <code>.filter(Objects::nonNull)</code> est Ã©quivalent Ã  <code>.filter(s &#8594; Objects.nonNull(s))</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_langage_java_quatriÃ¨me_partie">4. Le langage Java, quatriÃ¨me partie</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_thread">4.1. Thread</h3>
<div class="paragraph">
<p>Un thread ou, fil dâexÃ©cution, est le cadre dans lequel sâexÃ©cute sÃ©quentiellement un programme.<br>
Pour exÃ©cuter plusieurs tÃ¢ches en parallÃ¨le, il faut donc crÃ©er plusieurs threads.<br>
Un thread (non virtuel) consomme des ressources :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>de la mÃ©moire</p>
</li>
<li>
<p>du CPU, ou plus exactement, de la capacitÃ© de lâOS Ã  faire plusieurs tÃ¢ches en parallÃ¨le</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En effet, il peut (et la plupart du temps il y a) plus de threads que de cÅurs de calcul (CPUs).<br>
Câest donc Ã  lâOS dâalterner entre la pause et lâexecution des threads.<br>
Plus il y a de threads, et plus lâOS passe de temps (CPU) Ã  coordonner, laissant de moins en moins de place aux threads eux-mÃªmes.</p>
</div>
<div class="paragraph">
<p>En Java un thread est modÃ©lisÃ© par la classe <code>java.lang.Thread</code> et possÃ¨de un nom.<br>
Quand la JVM dÃ©marre, elle va crÃ©er (entre autres) le thread <strong>main</strong> qui exÃ©cutera la mÃ©thode <code>main</code>.</p>
</div>
<div class="paragraph">
<p>Quand un thread nâa plus de travail Ã  exÃ©cuter, il sâarrÃªte, et peut Ãªtre <em>garbage collectÃ©</em> si aucune variable ne pointe dessus.</p>
</div>
<div class="paragraph">
<p>La JVM sâarrÃªte quand il nây a plus de threads actifs (hors <code>daemon</code>).<br>
Dans le cas dâun programme simple qui ne dÃ©marre pas de nouveaux threads, une fois la mÃ©thode <code>main</code> terminÃ©e, le thread main sâarrÃªte, il nây a plus de thread actif, par consÃ©quence la JVM sâarrÃªte.</p>
</div>
<div class="paragraph">
<p>Dans le cas oÃ¹ des threads (hors <code>daemon</code>) ont Ã©tÃ© crÃ©Ã©s depuis le thread <code>main</code>, la JVM attendra quâils se terminent, mÃªme si le thread <code>main</code> est arrÃªtÃ©.</p>
</div>
<div class="sect3">
<h4 id="_crÃ©er_un_nouveau_thread">4.1.1. CrÃ©er un nouveau thread</h4>
<div class="paragraph">
<p>Pour dÃ©marrer un nouveau thread, il est possible de crÃ©er un nouvel objet de ce type et le dÃ©marrer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Runnable</span> <span class="n">action</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"hello"</span><span class="o">);</span> // <b class="conum">(1)</b>
<span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="n">action</span><span class="o">,</span> <span class="s">"my-super-thread-name"</span><span class="o">);</span>
<span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Une tÃ¢che Ã  exÃ©cuter, implÃ©mentation de lâinterface fonctionnelle <code>java.lang.Runnable</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_maitriser_sa_consommation">4.1.2. Maitriser sa consommation</h4>
<div class="paragraph">
<p>Comme on lâa vu, lâutilisation de thread nâest pas anodine pour une application.<br>
Câest pourquoi on choisit la plupart du temps de gÃ©rer ses threads au travers dâun mÃ©canisme de recyclage : lâ<em>object pool</em>.<br>
Ce patron de conception (design pattern) permet de dÃ©finir une limite ou un comportement Ã  un ensemble de ressources.<br>
Dans notre cas les ressources sont des threads, mais cela fonctionne Ã©galement avec des connexions Ã  une base de donnÃ©e (par exemple).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> // <b class="conum">(1)</b>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"hello "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"my "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"name "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"is "</span><span class="o">));</span>
<span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"John "</span><span class="o">));</span> // <b class="conum">(2)</b>
<span class="n">threadPool</span><span class="o">.</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">300L</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span> // <b class="conum">(3)</b>
<span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span> // <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>CrÃ©ation dâun <em>pool</em> de 2 threads</p>
</li>
<li>
<p>On peut soumettre plus de tÃ¢ches que de threads, elles seront stockÃ©es en mÃ©moire et traitÃ©es dÃ¨s que le <em>pool</em> le pourra.<br>
Il nây a pas de garantie dâordre, le rÃ©sultat dâun tel code nâest pas dÃ©terministe</p>
</li>
<li>
<p>Attente de la complÃ©tion de toutes les tÃ¢ches envoyÃ©es au <em>pool</em></p>
</li>
<li>
<p>LibÃ©ration des ressources, les 2 threads sont <em>relÃ¢chÃ©s</em> pour Ãªtre <em>garbage collectÃ©s</em></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_future">4.1.3. Future</h4>
<div class="paragraph">
<p>Afin de suivre lâÃ©volution dâune tÃ¢che soumise au <em>pool</em>, celui-ci renvoie un objet de type <code>java.util.concurrent.Future</code>.<br>
Dans le cas dâune tÃ¢che avec un type de retour, il est Ã©galement possible de faire une attente bloquante sur le rÃ©sultat dâune tÃ¢che en particulier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
<span class="nc">Future</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">temperatureFuture</span> <span class="o">=</span> <span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">callTemperatureWebSevice</span><span class="o">());</span>
<span class="nc">Future</span><span class="o">&lt;</span><span class="nc">SunIntensity</span><span class="o">&gt;</span> <span class="n">sunFuture</span> <span class="o">=</span> <span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">callSunshineWebSevice</span><span class="o">());</span> // <b class="conum">(1)</b>

<span class="k">try</span> <span class="o">{</span>
    <span class="nc">Double</span> <span class="n">temperature</span> <span class="o">=</span> <span class="n">temperatureFuture</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">200L</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span> // <b class="conum">(2)</b>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
    <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Call to temp WS interrupted"</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ExecutionException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(4)</b>
    <span class="n">logger</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Call to temp WS failed"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">TimeoutException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(5)</b>
    <span class="n">logger</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Call to temp WS timed-out"</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Les deux appels sont exÃ©cutÃ©s en parallÃ¨le</p>
</li>
<li>
<p>Attente bloquante de la complÃ©tion de la tÃ¢che <strong>temperature</strong>, on cas de succÃ¨s on rÃ©cupÃ©rera directement la valeur retournÃ©e par la mÃ©thode sâÃ©tant exÃ©cutÃ©e dans un autre thread</p>
</li>
<li>
<p>Exception survenant si le thread exÃ©cutant la tÃ¢che est interrompu</p>
</li>
<li>
<p>Exception survenant si une exception est levÃ©e par le code de la tÃ¢che</p>
</li>
<li>
<p>Exception survenant si la tÃ¢che nâest pas terminÃ©e aprÃ¨s le dÃ©lai spÃ©cifiÃ© (ici 200 ms)</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solid">5. SOLID</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les principes SOLID ont Ã©tÃ© Ã©noncÃ©s par Robert Cecil Martin (Uncle Bob) et leur respect permet un design modulaire dont le principe fondamental est le <strong>dÃ©couplage</strong> entre les composants.</p>
</div>
<div class="paragraph">
<p>Ce quâon entend par dÃ©couplage est la possibilitÃ© de faire un changement (ajout dâune fonctionnalitÃ©, correction dâun bug) localisÃ©, sans impacter le reste du code.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>S - Single responsibility : Une responsabilitÃ© par classe</p>
</li>
<li>
<p>O - Open / Close : ouvert Ã  la composition, fermÃ© Ã  la modification</p>
</li>
<li>
<p>L - Liskov substitution : substitution par un sous-type sans modification de la cohÃ©rence</p>
</li>
<li>
<p>I - Interface segregation : une interface (contrat) diffÃ©rente par client</p>
</li>
<li>
<p>D - Dependency inversion : travailler avec la forme la plus abstraite dâun objet</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_exemple_pour_s_et_l">5.1. Exemple pour <strong>S</strong> et <strong>L</strong></h3>
<div class="listingblock">
<div class="title">Listing 33. Fichier Logger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Logger</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 34. Fichier ConsoleLogger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConsoleLogger</span> <span class="kd">implements</span> <span class="nc">Logger</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"["</span> <span class="o">+</span> <span class="n">level</span> <span class="o">+</span> <span class="s">"] "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 35. Fichier FileLogger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileLogger</span> <span class="kd">implements</span> <span class="nc">Logger</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Path</span> <span class="n">path</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">FileLogger</span><span class="o">(</span><span class="nc">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Files</span><span class="o">.</span><span class="na">writeString</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="s">"["</span> <span class="o">+</span> <span class="n">level</span> <span class="o">+</span> <span class="s">"] "</span> <span class="o">+</span> <span class="n">message</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">,</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">,</span> <span class="no">CREATE</span><span class="o">,</span> <span class="no">APPEND</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">UncheckedIOException</span><span class="o">(</span><span class="s">"Cannot write log message to file: "</span> <span class="o">+</span> <span class="n">path</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Les implÃ©mentations font une chose bien prÃ©cise, plutÃ´t que dâavoir une unique classe qui gÃ¨re lâÃ©criture dans la console et dans un fichier avec un <code>if</code>.</p>
</div>
<div class="paragraph">
<p>Par ailleurs, remplacer une implÃ©mentation par une autre ne change rien pour le code qui utilise lâinterface <code>Logger</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exemple_pour_o_et_d">5.2. Exemple pour <strong>O</strong> et <strong>D</strong></h3>
<div class="listingblock">
<div class="title">Listing 36. Fichier CompositeLogger.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CompositeLogger</span> <span class="kd">implements</span> <span class="nc">Logger</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Logger</span><span class="o">&gt;</span> <span class="n">delegates</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CompositeLogger</span><span class="o">(</span><span class="nc">Logger</span><span class="o">...</span> <span class="n">loggers</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">delegates</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">loggers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">Level</span> <span class="n">level</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">delegates</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">l</span> <span class="o">-&gt;</span> <span class="n">l</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">level</span><span class="o">,</span> <span class="n">message</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici pour profiter de fonctionnalitÃ©s de plusieurs composants, on ne va pas modifier les composants eux-mÃªmes, mais plutÃ´t les composer.<br>
On pourra par la suite ajouter de nouveaux comportements (logger vers un broker ou une base de donnÃ©es par exemple) sans modifier, ni les composants existants, ni la logique de composition (ouvert Ã  la composition, fermÃ© Ã  la modification).</p>
</div>
<div class="paragraph">
<p>Par ailleurs, on utilise la forme la plus abstraite nÃ©cessaire, ici lâinterface <code>Logger</code> plutÃ´t que des implÃ©mentations prÃ©cises.<br>
Ainsi le comportement gÃ©nÃ©rique peut sâappliquer Ã  tous les sous-types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exemple_pour_i">5.3. Exemple pour <strong>I</strong></h3>
<div class="listingblock">
<div class="title">Listing 37. Fichier Vehicule.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Vehicule</span> <span class="o">{</span>

    <span class="kt">void</span> <span class="nf">startMoving</span><span class="o">();</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 38. Fichier Container.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Container</span> <span class="o">{</span>

    <span class="kt">void</span> <span class="nf">addItem</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 39. Fichier Car.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="kd">implements</span> <span class="nc">Vehicule</span><span class="o">,</span> <span class="nc">Container</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="n">trunk</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startMoving</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">startEngine</span><span class="o">();</span>
        <span class="n">pressAccelerator</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addItem</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">trunk</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La classe <code>Car</code> se comporte Ã  la fois comme un vÃ©hicule, mais Ã©galement comme un conteneur, de part sa capacitÃ© Ã  stocker des objets dans son coffre.</p>
</div>
<div class="paragraph">
<p>Cependant les classes intÃ©ressÃ©es par la capacitÃ© dâune voiture Ã  se dÃ©placer ne sont pas forcÃ©ment les mÃªmes que celles intÃ©ressÃ©es par le fait de pouvoir stocker des objets dedans.</p>
</div>
<div class="paragraph">
<p>On peut donc choisir dâimplÃ©menter plusieurs interfaces, chacune en lien avec un domaine diffÃ©rent, laissant la possibilitÃ© au code appelant de travailler avec une version plus abstraite et de dÃ©crire des comportements plus gÃ©nÃ©riques.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Ã©cosystÃ¨me_java">6. ÃcosystÃ¨me Java</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_maven">6.1. Maven</h3>
<div class="paragraph">
<p><strong>Maven</strong> est un outil de construction de projet crÃ©Ã© initialement pour Java.<br>
Il permet entre autres de dÃ©clarer ses dÃ©pendances, compiler le code, construire les binaires et lancer les tests.<br>
Câest aujourdâhui le plus utilisÃ© dans lâÃ©cosystÃ¨me Java.<br>
Il en existe dâautres qui sont moins rÃ©pandus ou dÃ©diÃ©s Ã  un autre langage comme Gradle, SBT, Ivy, Bazel, Make, etc.</p>
</div>
<div class="paragraph">
<p>Comme beaucoup dâoutils de dÃ©veloppement (frameworks, intÃ©gration continue, IDE, etc.), Maven repose sur une architecture modulaire.<br>
Dans cette architecture, le coeur dâexÃ©cution nâapporte que peu de fonctionnalitÃ©s, mais propose une API pour venir ajouter des fonctionnalitÃ©s par composition.</p>
</div>
<div class="paragraph">
<p>Par dÃ©faut Maven suit un enchaÃ®nement de phases (lifecycle), auxquelles sont associÃ©es des plugins par dÃ©faut :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven_lifecycle.png" alt="maven lifecycle">
</div>
</div>
<div class="paragraph">
<p>Par exemple, associÃ©e Ã  la phase <strong>test</strong>, câest le <em>goal</em> <strong>test</strong> du plugin <strong>maven-surefire-plugin</strong> qui est exÃ©cutÃ©.<br>
Pour lancer cette phase, on Ã©crira :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">mvn <span class="nb">test</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette commande lancera toutes les phases prÃ©cÃ©dentes, charge aux plugins de ne rien faire si le travail est dÃ©jÃ  fait (compilation par exemple).</p>
</div>
<div class="paragraph">
<p>Il sâagit dâun comportement par dÃ©faut.<br>
En effet, Maven fonctionne par <em>convention</em> plutÃ´t que par <em>configuration explicite</em>.<br>
MÃªme sâil reste possible de configurer Maven pour sortir du comportement par dÃ©faut, la plupart des projets prÃ©fÃ¨rent la simplicitÃ© et profitent du mÃªme coup dâune structure similaire, ce qui facilite la lecture, et lâutilisation dâoutils tiers comme les serveurs dâintÃ©gration continue, les solutions SAAS dâanalyse statique, etc.</p>
</div>
<div class="paragraph">
<p>Voici la structure dâun projet Maven :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">pom.xml # <b class="conum">(1)</b>
src/ # <b class="conum">(2)</b>
|-- main/ # <b class="conum">(3)</b>
|   |-- java/ # <b class="conum">(4)</b>
|       |-- com/
|           |-- mycompany/
|               |-- App.java
|-- <span class="nb">test</span>/ # <b class="conum">(5)</b>
    |-- java/
        |-- com/
            |-- mycompany/
                |-- AppTests.java
target/ # <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le fichier <strong>pom.xml</strong> dÃ©crit toutes les spÃ©cificitÃ©s du projet (coordonnÃ©es, scm, dÃ©pendances, plugins supplÃ©mentaires, etc.)</p>
</li>
<li>
<p>Le rÃ©pertoire <strong>src</strong> contient le code <em>Ã©crit</em></p>
</li>
<li>
<p>le rÃ©pertoire <strong>main</strong> contient le code de production, le code qui sera embarquÃ© dans les binaires</p>
</li>
<li>
<p>le rÃ©pertoire <strong>java</strong> contient le code <em>Java</em>, il est possible de faire cohabiter plusieurs languages dans des rÃ©pertoires dÃ©diÃ©s.<br>
Par exemple des fichiers *.kt dans un rÃ©pertoire <strong>kotlin</strong> Ã  cÃ´tÃ© du rÃ©pertoire <strong>java</strong></p>
</li>
<li>
<p>le rÃ©pertoire <strong>test</strong> contient le code de test, ce code ne sera <span class="underline">pas</span> embarquÃ© dans les binaires</p>
</li>
<li>
<p>le rÃ©pertoire <strong>target</strong> contient tous les fichiers que Maven va gÃ©nÃ©rer, les classes compilÃ©es, le rÃ©sultat des tests, etc.<br>
Ce rÃ©pertoire est gÃ©nÃ©ralement exclu du gestionnaire de code source (<strong>.gitignore</strong> pour Git)</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_anatomie_dun_fichier_pom_simple">6.1.1. Anatomie dâun fichier POM simple</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>
         <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>com.mycompany<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>myproject<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span> &lt;!--<b class="conum">(1)</b>--&gt;

    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="nt">&lt;maven.compiler.source&gt;</span>16<span class="nt">&lt;/maven.compiler.source&gt;</span>
        <span class="nt">&lt;maven.compiler.target&gt;</span>16<span class="nt">&lt;/maven.compiler.target&gt;</span> &lt;!--<b class="conum">(2)</b>--&gt;

        <span class="nt">&lt;retrofit.version&gt;</span>1.2.3.4<span class="nt">&lt;/retrofit.version&gt;</span> &lt;!--<b class="conum">(3)</b>--&gt;
        <span class="nt">&lt;maven-source-plugin.version&gt;</span>1.2.3.4<span class="nt">&lt;/maven-source-plugin.version&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>  &lt;!--<b class="conum">(4)</b>--&gt;
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.squareup.retrofit2<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>retrofit<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${retrofit.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>  &lt;!--<b class="conum">(5)</b>--&gt;
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>${maven-source-plugin.version}<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;executions&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>attach-sources<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>jar-no-fork<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>groupId, artifactId et version forment les coordonnÃ©es uniques dâun projet quand celui-ci est publiÃ© dans un dÃ©pÃ´t (Maven Central ou autre)</p>
</li>
<li>
<p>encodage et version du langage Java permettent de garantir que le code est modifiÃ© et compris de la mÃªme faÃ§on par les diffÃ©rentes parties prenantes (les dÃ©veloppeurs et le serveur dâintÃ©gration continue)</p>
</li>
<li>
<p>versions des dÃ©pendances et plugins utilisÃ©s plus bas</p>
</li>
<li>
<p>bloc dans lequel on peut ajouter autant de <strong>dÃ©pendances</strong> que lâon souhaite en utilisant leurs coordonnÃ©es.<br>
Ici on ajoute une dÃ©pendance permettant de modÃ©liser rapidement un client HTTP</p>
</li>
<li>
<p>bloc dans lequel on peut ajouter autant de <strong>plugins</strong> que lâon souhaite en utilisant leurs coordonnÃ©es.<br>
Ici on ajoute un plugin qui va gÃ©nÃ©rer un binaire contenant les <em>sources</em> du projet</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les dÃ©pendances sont les librairies tierces que lâon souhaite utiliser dans un projet, que ce soit dans le code de production ou le code de test.<br>
Les plugins sont quant Ã  eux des mÃ©caniques supplÃ©mentaires que lâon souhaite ajouter au cycle de vie du projet (gÃ©nÃ©ration de la documentation, crÃ©ation dâune image docker, analyse statique du code, etc.)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_junit">6.2. JUnit</h3>
<div class="paragraph">
<p>Les tests sont une composante importante de la programmation.<br>
Ils permettent entre autres de :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vÃ©rifier le fonctionnement dâun bloc de code, maintenant et dans le futur</p>
</li>
<li>
<p>documenter, en montrant comment le code peut ou doit Ãªtre utilisÃ©</p>
</li>
<li>
<p>rassurer les autres membres dâune Ã©quipe de dÃ©veloppement sur la qualitÃ© du code proposÃ©</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cependant, la librairie standard Java ne fournit pas dâAPI pour Ã©crire des tests, ni de mÃ©canisme pour les lancer indÃ©pendamment du programme.</p>
</div>
<div class="paragraph">
<p>LâÃ©criture de tests repose donc sur :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>une API fournie par un framework tiers, JUnit est le plus populaire</p>
</li>
<li>
<p>un plugin pour le gestionnaire de projet capable dâexÃ©cuter le framework, <strong>Surefire</strong> dans le cas de Maven</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ces spÃ©cificitÃ©s sont traduites comme suit dans le fichier <strong>pom.xml</strong> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>
         <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- omitted for concision --&gt;</span>

    <span class="nt">&lt;properties&gt;</span>
        <span class="c">&lt;!-- omitted for concision --&gt;</span>

        <span class="nt">&lt;junit.version&gt;</span>5.7.1<span class="nt">&lt;/junit.version&gt;</span>
        <span class="nt">&lt;assertj.version&gt;</span>3.19.0<span class="nt">&lt;/assertj.version&gt;</span>
        <span class="nt">&lt;maven-surefire-plugin.version&gt;</span>2.22.2<span class="nt">&lt;/maven-surefire-plugin.version&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="c">&lt;!-- other dependencies can be added here --&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.junit.jupiter<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${junit.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span> &lt;!--<b class="conum">(1)</b>--&gt;
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.assertj<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>assertj-core<span class="nt">&lt;/artifactId&gt;</span> &lt;!--<b class="conum">(2)</b>--&gt;
            <span class="nt">&lt;version&gt;</span>${assertj.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;pluginManagement&gt;</span>
            <span class="nt">&lt;plugins&gt;</span>
                <span class="nt">&lt;plugin&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;version&gt;</span>${maven-surefire-plugin.version}<span class="nt">&lt;/version&gt;</span> &lt;!--<b class="conum">(3)</b>--&gt;
                <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;/plugins&gt;</span>
        <span class="nt">&lt;/pluginManagement&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>dÃ©claration de la dÃ©pendance JUnit en <em>scope</em> <strong>test</strong>, elle ne sera pas disponible pour le code de production (dans <strong>src/main/java</strong>), uniquement pour le code de test (dans <strong>src/test/java</strong>)</p>
</li>
<li>
<p>dÃ©claration dâune dÃ©pendance permettant dâÃ©crire des vÃ©rifications (la plus populaire, mais dâautres existent)</p>
</li>
<li>
<p>surcharge de la version du plugin <strong>Surefire</strong> avec la derniÃ¨re version, Maven 3 ne prenant pas la derniÃ¨re version par dÃ©faut, et seules les derniÃ¨res versions sont compatibles avec les derniÃ¨res versions de JUnit</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En Java, les tests sont principalement reprÃ©sentÃ©s par des mÃ©thodes.<br>
Par dÃ©faut, le plugin <strong>Surefire</strong> va rechercher les mÃ©thodes de test dans les classes dont le nom fini par <code>Test</code>, <code>Tests</code> ou <code>TestCase</code>.</p>
</div>
<div class="paragraph">
<p>Pour tester le code suivant :</p>
</div>
<div class="listingblock">
<div class="title">Listing 40. Fichier src/main/java/com/lernejo/math/MathUtils.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">com.lernejo.math</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MathUtils</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">fact</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"N cannot be negative"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fact</span><span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On peut Ã©crire cette classe de test :</p>
</div>
<div class="listingblock">
<div class="title">Listing 41. Fichier src/test/java/com/lernejo/math/MathUtilsTest.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">com.lernejo.math</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.assertj.core.api.Assertions</span><span class="o">;</span> // <b class="conum">(1)</b>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">MathUtilsTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MathUtils</span> <span class="n">mathUtils</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MathUtils</span><span class="o">();</span>

    <span class="nd">@Test</span> // <b class="conum">(2)</b>
    <span class="kt">void</span> <span class="nf">fact_of_negative_number_throws</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Assertions</span><span class="o">.</span><span class="na">assertThatExceptionOfType</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                <span class="o">.</span><span class="na">isThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">mathUtils</span><span class="o">.</span><span class="na">fact</span><span class="o">(-</span><span class="mi">1</span><span class="o">))</span>
                <span class="o">.</span><span class="na">withMessage</span><span class="o">(</span><span class="s">"N cannot be negative"</span><span class="o">);</span> // <b class="conum">(3)</b>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">fact_of_3_is_6</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mathUtils</span><span class="o">.</span><span class="na">fact</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
        <span class="nc">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span> // <b class="conum">(4)</b>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><em>Import</em> des classes publiques des dÃ©pendances de test</p>
</li>
<li>
<p>Une mÃ©thode de test est <em>marquÃ©e</em> par une annotation afin de la diffÃ©rencier dâune mÃ©thode utilitaire ou interne au test.<br>
Le framework ne lancera que les mÃ©thodes identifiÃ©es comme des mÃ©thodes de test</p>
</li>
<li>
<p>Utilisation de la librairie de vÃ©rification pour sâassurer quâune exception est levÃ©e quand on appelle la mÃ©thode avec un mauvais paramÃ¨tre.<br>
On vÃ©rifie Ã©galement le contenu du message dâerreur.</p>
</li>
<li>
<p>Utilisation de la librairie de vÃ©rification pour sâassurer que le rÃ©sultat de <code>3!</code> est bien <code>6</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une mÃ©thode de test a une structure bien prÃ©cise :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>zero</strong>, <strong>une</strong> ou <strong>plusieurs</strong> mises en condition initiale.<br>
Il sâagit gÃ©nÃ©ralement de constituer un jeu de donnÃ©es ou dâamener le systÃ¨me dans un certain Ã©tat</p>
</li>
<li>
<p><strong>un unique</strong> Ã©lÃ©ment dÃ©clencheur.<br>
Il sâagit de lâappel au bloc de code que lâon souhaite tester.</p>
</li>
<li>
<p><strong>une</strong> ou <strong>plusieurs</strong> vÃ©rifications sur lâÃ©tat de sortie, que ce soit le retour de la mÃ©thode testÃ©e ou des donnÃ©es accessibles autrement (persistÃ©es en base de donnÃ©e par exemple)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dans le cas ou lâon souhaite Ã©crire plusieurs tests similaires Ã  lâexception du jeu de donnÃ©es, il est possible dâÃ©crire des <span class="underline">tests paramÃ©trÃ©s</span> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@ParameterizedTest</span> // <b class="conum">(1)</b>
<span class="nd">@CsvSource</span><span class="o">({</span> // <b class="conum">(2)</b>
    <span class="s">"0, 1"</span><span class="o">,</span>
    <span class="s">"1, 1"</span><span class="o">,</span>
    <span class="s">"2, 2"</span><span class="o">,</span>
    <span class="s">"3, 6"</span><span class="o">,</span>
    <span class="s">"4, 24"</span><span class="o">,</span>
    <span class="s">"13, 1932053504"</span>
<span class="o">})</span>
<span class="kt">void</span> <span class="nf">fact_test_cases</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="kt">int</span> <span class="n">expectedResult</span><span class="o">)</span> <span class="o">{</span> // <b class="conum">(3)</b>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mathUtils</span><span class="o">.</span><span class="na">fact</span><span class="o">(</span><span class="n">n</span><span class="o">);</span>
    <span class="nc">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">result</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expectedResult</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Marque la mÃ©thode comme test paramÃ©trÃ©</p>
</li>
<li>
<p>DÃ©clare les jeux de donnÃ©es Ã  utiliser, la mÃ©thode sera appelÃ©e autant de fois que de jeux de donnÃ©e, ici 6 fois</p>
</li>
<li>
<p>Le framework se charge dâappeler la mÃ©thode avec les paramÃ¨tres dans lâordre oÃ¹ ils ont Ã©tÃ© dÃ©clarÃ©s</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ce cours vous a permis de voir un panel des fonctionnalitÃ©s du langage Java ainsi quâun aperÃ§u de lâÃ©cosystÃ¨me qui lâentoure.</p>
</div>
<div class="paragraph">
<p>Il reste bien dâautres choses Ã  explorer, que ce soit dans le langage lui-mÃªme, avec lâintrospection, les proxys dynamiques, les plugins de compilateur (APT), etc. ou dans lâÃ©cosystÃ¨me qui lâentoure, avec les tests par mutation, la gÃ©nÃ©ration de la documentation vivante, lâanalyse de code statique et dynamique&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Mais cette histoire sera pour une prochaine fois.</p>
</div>
<div class="sect2">
<h3 id="_pour_aller_plus_loin">Pour aller plus loin</h3>
<div class="ulist">
<ul>
<li>
<p>La bible de JM Doudoux : <a href="https://www.jmdoudoux.fr/accueil_java.htm" class="bare">https://www.jmdoudoux.fr/accueil_java.htm</a></p>
</li>
<li>
<p>Les vidÃ©os de JosÃ© Paumard : <a href="https://www.youtube.com/c/coursenlignejava/videos" class="bare">https://www.youtube.com/c/coursenlignejava/videos</a></p>
</li>
<li>
<p>Une description des types de couplage : <a href="https://connascence.io/" class="bare">https://connascence.io/</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>